"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[3548],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var i=s(96540);const l={},c=i.createContext(l);function o(e){const n=i.useContext(c);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),i.createElement(c.Provider,{value:n},e.children)}},76470:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"Leetcode/Other/227.227 - Basic Calculator II (Medium)","title":"227.227 - Basic Calculator II (Medium)","description":"basic calculator 3 \u9898\u7684\u533a\u522b","source":"@site/docs/Leetcode/99.Other/227.227 - Basic Calculator II (Medium).md","sourceDirName":"Leetcode/99.Other","slug":"/p/412d0110-6b23-4927-a687-c0c5a82c7a4e","permalink":"/notes/docs/p/412d0110-6b23-4927-a687-c0c5a82c7a4e","draft":false,"unlisted":false,"editUrl":"https://github.com/emmableu/notes/edit/main/docs/Leetcode/99.Other/227.227 - Basic Calculator II (Medium).md","tags":[],"version":"current","frontMatter":{"created_at":"2025-10-23","page_link":"/p/412d0110-6b23-4927-a687-c0c5a82c7a4e","slug":"/p/412d0110-6b23-4927-a687-c0c5a82c7a4e"},"sidebar":"tutorialSidebar","previous":{"title":"226.226 - Invert Binary Tree - Easy","permalink":"/notes/docs/p/8771bb93-0f01-476a-93ed-44d6a4d84a02"},"next":{"title":"23.23 - Merge k Sorted Lists - Hard","permalink":"/notes/docs/p/f120bf78-9ee7-488a-9cbc-8c1c265b1457"}}');var l=s(74848),c=s(28453);const o={created_at:"2025-10-23",page_link:"/p/412d0110-6b23-4927-a687-c0c5a82c7a4e",slug:"/p/412d0110-6b23-4927-a687-c0c5a82c7a4e"},a=void 0,t={},r=[{value:"basic calculator 3 \u9898\u7684\u533a\u522b",id:"basic-calculator-3-\u9898\u7684\u533a\u522b",level:2},{value:"Description",id:"description",level:2},{value:"Examples",id:"examples",level:2},{value:"Solution: \u53cc\u6808\uff0cnums\uff0cops\uff08\u5355\u8c03\u9012\u589e\u6808\uff09",id:"solution-\u53cc\u6808numsops\u5355\u8c03\u9012\u589e\u6808",level:2},{value:"\u4f2a\u4ee3\u7801\uff1a",id:"\u4f2a\u4ee3\u7801",level:4},{value:"\u4ee5 <code>&quot;1+2*3+4&quot;</code> \u4e3a\u4f8b\u5206\u6790\uff1a",id:"\u4ee5-1234-\u4e3a\u4f8b\u5206\u6790",level:4},{value:"\u4ee3\u7801",id:"\u4ee3\u7801",level:4}];function p(e){const n={br:"br",code:"code",h2:"h2",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"basic-calculator-3-\u9898\u7684\u533a\u522b",children:"basic calculator 3 \u9898\u7684\u533a\u522b"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u672c\u9898\uff1a  +, -, *, /"}),"\n",(0,l.jsx)(n.li,{children:"basic calculater: +, -, (, ),"}),"\n",(0,l.jsx)(n.li,{children:"basic calculater III: +, 0,  (, ), *, /"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,l.jsx)(n.p,{children:"Given a string s which represents an expression, evaluate this expression and return its value."}),"\n",(0,l.jsx)(n.p,{children:"The integer division should truncate toward zero."}),"\n",(0,l.jsx)(n.p,{children:"You may assume that the given expression is always valid. All intermediate results will be in the range of [-231, 231 - 1]."}),"\n",(0,l.jsx)(n.p,{children:"Note: You are not allowed to use any built-in function which evaluates strings as mathematical expressions, such as eval()."}),"\n",(0,l.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'Example 1:\n\nInput: s = "3+2*2"\nOutput: 7\nExample 2:\n\nInput: s = " 3/2 "\nOutput: 1\nExample 3:\n\nInput: s = " 3+5 / 2 "\nOutput: 5\n\n'})}),"\n",(0,l.jsx)(n.h2,{id:"solution-\u53cc\u6808numsops\u5355\u8c03\u9012\u589e\u6808",children:"Solution: \u53cc\u6808\uff0cnums\uff0cops\uff08\u5355\u8c03\u9012\u589e\u6808\uff09"}),"\n",(0,l.jsx)(n.h4,{id:"\u4f2a\u4ee3\u7801",children:"\u4f2a\u4ee3\u7801\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'def calculate(s):\n    \u5148\u53bb\u6389\u7a7a\u683c "1 + 2" \u53d8\u6210 "1+2"\n    \u5b9a\u4e49\u4f18\u5148\u7ea7\uff0c\u52a0\u51cf\u4e3a0\uff0c\u4e58\u9664\u4e3a1\uff1a\n        op_priority = {"+":0, "-":0, "*":1, "/":1}\n    \u521d\u59cb\u5316\u4e24\u4e2a\u6808 nums, ops = [], []\n    \u904d\u5386s\u7528\u7684idx\u70b9 i = 0\n    while i < len(s):\n        \u5f53\u524d\u5143\u7d20 c = s[i]\n        \u5148\u589e\u52a0i\u4f5c\u4e0b\u4e00\u8f6e\u904d\u5386\u7528\uff1a i += 1 \n        \u5982\u679cc\u662f\u6570\u5b57\u7684\u8bdd\uff0c\u4e00\u76f4\u5f80\u4e0b\u8bfb\u5230\u4e0d\u662f\u6570\u5b57\u4e3a\u6b62\uff0c\u7136\u540e\u628a\u8fd9\u4e2a\u6570\u5b57\u538b\u5165nums\u6808\u5185\n        \u5982\u679cc\u662foperation\uff0c\u8fdb\u884c\u5355\u8c03\u6808\u7684\u538b\u6808\u64cd\u4f5c\uff1a\n        \u5982\u679c\u9047\u5230\u5f53\u524d\u904d\u5386\u5230\u7684\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u4f4e\u4e8e\u6216\u7b49\u4e8e\u5f53\u524d\u6808\u9876\u5143\u7d20\u7684\u4f18\u5148\u7ea7\u7684\uff0c\n        \u8981\u5148\u628a\u6808\u9876\u5143\u7d20pop\u51fa\u6765\uff0cpop\u7684\u8fc7\u7a0b\u4e2d\u8fdb\u884c\u548cnums\u4e00\u8d77\u7684\u8ba1\u7b97\u64cd\u4f5c\uff0c\n        \u7136\u540e\u518d\u628a\u5f53\u524d\u7684\u8fd0\u7b97\u7b26\u538b\u5165\u7ad9\u5185\uff1a\n            while ops and op_priority[ops[-1]] >= op_priority[c]:\n                # \u6ce8\u610f\uff0c\u5fc5\u987b\u6709\u7b49\u4e8e\uff0c\u56e0\u4e3a\u5982\u679c\u4f18\u5148\u7ea7\u4e00\u6837\uff0c\u8981\u5148\u8ba1\u7b97\u524d\u9762\u7684\u5143\u7d20\n                self.calc(nums, ops)\n            ops.append(c)\n    \u6700\u540e\u904d\u5386\u5b8c\u4e86\uff0c\u53ef\u80fdops\u8fd8\u6709\u5143\u7d20\uff0c\u5c31\u8fdb\u884c\u6700\u540e\u7684\u8fd0\u7b97\uff1a\n    while ops:\n        self.calc(nums, ops)\n    return nums[0] #nums\u91cc\u9762\u53ea\u6709\u8fd9\u4e00\u4e2a\u5143\u7d20\uff0c\u5c31\u662fres\n\ndef calc(nums, ops):\n    \u5bf9nums\u8fd9\u4e2a\u6808\u7684\u6808\u9876\u4e24\u4e2a\u5143\u7d20\u548cops\u7684\u6808\u9876\u4e00\u4e2a\u5143\u7d20\u8fdb\u884c\u8ba1\u7b97\n    \u7136\u540e\u628a\u7ed3\u679cpush\u5230nums\u91cc\u9762\u65b9\u4fbf\u4e0b\u4e00\u8f6e\u8ba1\u7b97\n'})}),"\n",(0,l.jsxs)(n.h4,{id:"\u4ee5-1234-\u4e3a\u4f8b\u5206\u6790",children:["\u4ee5 ",(0,l.jsx)(n.code,{children:'"1+2*3+4"'})," \u4e3a\u4f8b\u5206\u6790\uff1a"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5148\u8d70\u5230 1+2 \u7ed3\u675f\uff0c\u6b64\u65f6 ",(0,l.jsx)(n.code,{children:"nums = [1,2], ops = [+]"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u518d\u8d70\u5230 * 3 \u7ed3\u675f\uff0c\u6b64\u65f6 ",(0,l.jsx)(n.code,{children:"nums = [1,2,3], ops = [+,*]"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u653e\u8fdb + \u53f7\uff0c\u8fdd\u53cd\u4e86ops\u7684\u9012\u589e\u7279\u6027\uff0c\u6240\u4ee5\u5bf9\u73b0\u6709\u7684\u5143\u7d20\u5728while loop\u4e2d\u8fdb\u884c\u8ba1\u7b97\u548cpop\uff0c\u4f9d\u6b21\u4e3a\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"nums = [1,6], ops = [+]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"nums = [7], ops = []"})}),"\n",(0,l.jsxs)(n.li,{children:["\u7136\u540e\u6700\u540e\u518d\u5f80ops\u91cc\u9762push +\u53f7\uff0c ",(0,l.jsx)(n.code,{children:"nums = [7], ops = [+]"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u6700\u540e\u653e\u8fdb4\uff0c ",(0,l.jsx)(n.code,{children:"nums = [7,4], ops = [+]"}),(0,l.jsx)(n.br,{}),"\n\u56e0\u4e3aops\u975e\u7a7a\uff0c\u8fdb\u884c\u6700\u540e\u4e00\u6ce2\u8ba1\u7b97\u64cd\u4f5c\uff0c\u5f97\u5230 ",(0,l.jsx)(n.code,{children:"nums=[11], ops = []"}),(0,l.jsx)(n.br,{}),"\nreturn nums[0] = 11"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u4ee3\u7801",children:"\u4ee3\u7801"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'class Solution:    \n    def calculate(self, s):\n        s = s.replace(" ", "")\n        op_priority = {"+":0, "-":0, "*":1, "/":1}\n        nums, ops = [], []\n        i = 0\n        while i < len(s):\n            c = s[i]\n            i += 1\n            if c.isdigit():\n                while i < len(s) and s[i].isdigit():\n                    c += s[i]\n                    i += 1\n                nums.append(int(c))\n            else:\n                while ops and op_priority[ops[-1]] >= op_priority[c]:\n                    self.calc(nums, ops)\n                ops.append(c)\n        \n        while ops:\n            self.calc(nums, ops)\n        return nums[0]\n                \n    def calc(self, nums, ops):\n        b, a = nums.pop(), nums.pop() if nums else 0\n        op = ops.pop()\n        if op == "+":\n            res = a + b\n        elif op == "-":\n            res = a - b\n        elif op == "*":\n            res = a* b\n        elif op == "/":\n            res = a // b #\u6ce8\u610f\u5fc5\u987b\u8981\u5199\u6574\u9664\n            \n        nums.append(res)\n'})})]})}function d(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(p,{...e})}):p(e)}}}]);