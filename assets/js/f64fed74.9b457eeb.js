"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[3439],{28453:(e,r,n)=>{n.d(r,{R:()=>u,x:()=>m});var s=n(96540);const t={},i=s.createContext(t);function u(e){const r=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function m(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:u(e.components),s.createElement(i.Provider,{value:r},e.children)}},68429:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>m,default:()=>l,frontMatter:()=>u,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"Leetcode/Prefix Sum/304.304 - Range Sum Query 2D - Immutable - Medium","title":"304.304 - Range Sum Query 2D - Immutable - Medium","description":"LC link","source":"@site/docs/Leetcode/12.Prefix Sum/304.304 - Range Sum Query 2D - Immutable - Medium.md","sourceDirName":"Leetcode/12.Prefix Sum","slug":"/p/e50a01c4-4447-4750-813d-b44d25ad7c3e","permalink":"/notes/docs/p/e50a01c4-4447-4750-813d-b44d25ad7c3e","draft":false,"unlisted":false,"editUrl":"https://github.com/emmableu/notes/edit/main/docs/Leetcode/12.Prefix Sum/304.304 - Range Sum Query 2D - Immutable - Medium.md","tags":[],"version":"current","frontMatter":{"created_at":"2025-10-23","page_link":"/p/e50a01c4-4447-4750-813d-b44d25ad7c3e","slug":"/p/e50a01c4-4447-4750-813d-b44d25ad7c3e"},"sidebar":"tutorialSidebar","previous":{"title":"238.238 - Product of Array Except Self - Medium","permalink":"/notes/docs/p/5e9bda2a-9f05-46fd-a197-a00d98729ca7"},"next":{"title":"523.523 - Continuous Subarray Sum (Medium)","permalink":"/notes/docs/p/c38e22a2-1405-49a9-97a8-6853da12e098"}}');var t=n(74848),i=n(28453);const u={created_at:"2025-10-23",page_link:"/p/e50a01c4-4447-4750-813d-b44d25ad7c3e",slug:"/p/e50a01c4-4447-4750-813d-b44d25ad7c3e"},m=void 0,c={},o=[{value:"Solution",id:"solution",level:2},{value:"1. \u6c42presum",id:"1-\u6c42presum",level:4},{value:"2.\u6839\u636epresum\u6c42\u5b50\u77e9\u5f62\u9762\u79ef",id:"2\u6839\u636epresum\u6c42\u5b50\u77e9\u5f62\u9762\u79ef",level:4}];function a(e){const r={a:"a",blockquote:"blockquote",br:"br",code:"code",h2:"h2",h4:"h4",img:"img",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.a,{href:"https://leetcode.com/problems/range-sum-query-2d-immutable/",children:"LC link"}),"\n",(0,t.jsx)(r.a,{href:"https://leetcode-cn.com/problems/range-sum-query-2d-immutable/solution/ru-he-qiu-er-wei-de-qian-zhui-he-yi-ji-y-6c21/",children:"explanation"})]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/202208241856173.png",alt:""}),"\n",(0,t.jsx)(r.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/202208241857869.png",alt:""})]}),"\n",(0,t.jsx)(r.h2,{id:"solution",children:"Solution"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsx)(r.p,{children:"\u5b9a\u7406\uff1a\u5bf9\u4e8enums=[1,2,3], presum=[0,1,3,6]"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"presum[j] - presum[i] = sum(nums[i:j])"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"\u5de6\u95ed\u53f3\u5f00"}),"\u533a\u95f4",(0,t.jsx)(r.code,{children:"[i,j)"}),"\u7684\u548c\u5c31\u662f\u524d\u7f00\u548c\u6570\u7ec4 presum[j] - presum[i]\u7684\u503c,\u6ce8\u610f\u8fd9\u91cc\u7684pre_sum\u4e3a\u4e86\u53ef\u4ee5\u8ba1\u7b97\u7b2c\u4e00\u4e2a\u6570\u5b57\uff0c\u5de6\u8fb9\u589e\u6dfb\u4e86\u4e00\u4f4d\u3002"]}),"\n"]}),"\n",(0,t.jsx)(r.h4,{id:"1-\u6c42presum",children:"1. \u6c42presum"}),"\n",(0,t.jsxs)(r.p,{children:["\u628a",(0,t.jsx)(r.code,{children:"self.presum"}),"\u6bd4\u539f\u77e9\u9635 matrix \u591a\u4e00\u884c\u4e00\u5217\uff0c\u8fd9\u6837\u7b2c 0 \u884c\u4e0e\u7b2c 0 \u5217\u7684\u5143\u7d20\u4e5f\u80fd\u4f7f\u7528\u4e0a\u9762\u7684\u9012\u63a8\u516c\u5f0f\u3002\npresum[i][j] \u8868\u793a ",(0,t.jsx)(r.a,{href:"%E5%8C%85%E6%8B%AC0,0",children:"0,0"})," \u5230 ",(0,t.jsx)(r.a,{href:"%E5%8C%85%E6%8B%ACi-1,j-1",children:"i-1,j-1"}),"\u7684\u5b50\u77e9\u5f62\u6240\u6709\u5143\u7d20\u7684\u548c\n",(0,t.jsx)(r.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/304-0.png",alt:""}),"\n",(0,t.jsx)(r.code,{children:"presum[i][j]=presum[i\u22121][j]+presum[i][j\u22121]\u2212preSum[i\u22121][j\u22121]+matrix[i-1][j-1]"}),(0,t.jsx)(r.br,{}),"\n\u4e5f\u5c31\u662f\n",(0,t.jsx)(r.code,{children:"presum[i+1][j+1]=presum[i][j+1]+presum[i+1][j]\u2212preSum[i][j]+matrix[i][j]"})]}),"\n",(0,t.jsx)(r.h4,{id:"2\u6839\u636epresum\u6c42\u5b50\u77e9\u5f62\u9762\u79ef",children:"2.\u6839\u636epresum\u6c42\u5b50\u77e9\u5f62\u9762\u79ef"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/304-1.png",alt:""}),"\n\u6ce8\u610f\uff0c\u5728\u4e00\u7ef4\u4e2d\uff0c \u524d\u7f00\u548c\u6570\u7ec4 presum[j] - presum[i]\u7684\u503c\u662f\u5de6\u95ed\u53f3\u5f00\u533a\u95f4",(0,t.jsx)(r.code,{children:"[i,j)"}),"\u7684\u548c\uff0c\u6240\u4ee5\u8fd9\u91cc\u6211\u4eec \u4ee4end row (r) = row2 + 1, end column (c)= col2 + 1"]}),"\n",(0,t.jsxs)(r.p,{children:["sumRegion return ",(0,t.jsx)(r.code,{children:"self.presum[r][c] - self.presum[row1][c] - self.presum[r][col1] + self.presum[row1][col1]"})]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:"class NumMatrix:\n    def __init__(self, matrix: List[List[int]]):\n        m, n = len(matrix), len(matrix[0])\n        presum = [[0] * (n+1) for _ in range(m + 1)] \n        for i in range(m): #\u6ce8\u610f\u4e00\u5b9a\u8981\u4ecem=0, n=0\u5f00\u59cb\n            for j in range(n):\n                presum[i+1][j+1] = matrix[i][j] + presum[i][j+1] + presum[i+1][j] - presum[i][j]\n        self.presum = presum\n\n    def sumRegion(self, row1: int, col1: int, row2: int, col2: int) -> int:\n        r, c = row2 + 1, col2 + 1\n        return self.presum[r][c] - self.presum[row1][c] - self.presum[r][col1] + self.presum[row1][col1]\n"})})]})}function l(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);