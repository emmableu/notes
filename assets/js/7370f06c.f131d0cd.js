"use strict";(globalThis.webpackChunknotes=globalThis.webpackChunknotes||[]).push([[62307],{28453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>a});var r=i(96540);const s={},t=r.createContext(s);function c(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(t.Provider,{value:n},e.children)}},75911:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"ML General/Classification Metric","title":"Classification Metric","description":"Basic Classification Metrics","source":"@site/docs/05. ML General/06.Classification Metric.md","sourceDirName":"05. ML General","slug":"/p/40c27ac6-55a8-4fa7-94a2-9e0ea4b0976d","permalink":"/notes/docs/p/40c27ac6-55a8-4fa7-94a2-9e0ea4b0976d","draft":false,"unlisted":false,"editUrl":"https://github.com/emmableu/notes/edit/main/docs/05. ML General/06.Classification Metric.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"created_at":"2025-11-02","page_link":"/p/40c27ac6-55a8-4fa7-94a2-9e0ea4b0976d","slug":"/p/40c27ac6-55a8-4fa7-94a2-9e0ea4b0976d"},"sidebar":"tutorialSidebar","previous":{"title":"Bias and Variance","permalink":"/notes/docs/p/33322e19-551a-47dd-ba82-e1a9d5d30479"},"next":{"title":"Feature Selection","permalink":"/notes/docs/p/780d6a08-9052-48b8-be65-8e0aa46e3ffb"}}');var s=i(74848),t=i(28453);const c={created_at:"2025-11-02",page_link:"/p/40c27ac6-55a8-4fa7-94a2-9e0ea4b0976d",slug:"/p/40c27ac6-55a8-4fa7-94a2-9e0ea4b0976d"},a=void 0,l={},d=[{value:"Basic Classification Metrics",id:"basic-classification-metrics",level:2},{value:"Why accuracy is not a good metric for unbalanced data:",id:"why-accuracy-is-not-a-good-metric-for-unbalanced-data",level:3},{value:"Binary classification - Confusion Metrics",id:"binary-classification---confusion-metrics",level:3},{value:"Why does F1 use harmonic mean \u8c03\u548c\u5e73\u5747\u503c of recall and precision?",id:"why-does-f1-use-harmonic-mean-\u8c03\u548c\u5e73\u5747\u503c-of-recall-and-precision",level:3},{value:"Multi-Class Classification",id:"multi-class-classification",level:3},{value:"ROC",id:"roc",level:3},{value:"AUC",id:"auc",level:3},{value:"Interpreting AUC:",id:"interpreting-auc",level:4},{value:"Precision - Recall Tradeoff",id:"precision---recall-tradeoff",level:2},{value:"Manually generate Precision-Recall (PR) curve",id:"manually-generate-precision-recall-pr-curve",level:2}];function o(e){const n={blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"basic-classification-metrics",children:"Basic Classification Metrics"}),"\n",(0,s.jsx)(n.h3,{id:"why-accuracy-is-not-a-good-metric-for-unbalanced-data",children:"Why accuracy is not a good metric for unbalanced data:"}),"\n",(0,s.jsxs)(n.p,{children:["\u5047\u8bbe\u6211\u4eec\u6709100\u5f20\u56fe\u7247\uff0c\u5176\u4e2d91\u5f20\u56fe\u7247\u662f\u300c\u72d7\u300d\uff0c5\u5f20\u662f\u300c\u732b\u300d\uff0c4\u5f20\u662f\u300c\u732a\u300d\uff0c\u6211\u4eec\u5e0c\u671b\u8bad\u7ec3\u4e00\u4e2a\u4e09\u5206\u7c7b\u5668\uff0c\u80fd\u6b63\u786e\u8bc6\u522b\u56fe\u7247\u91cc\u52a8\u7269\u7684\u7c7b\u522b\u3002\u5176\u4e2d\uff0c\u72d7\u8fd9\u4e2a\u7c7b\u522b\u5c31\u662f\u5927\u591a\u6570\u7c7b (majority class)\u3002\u5f53\u5927\u591a\u6570\u7c7b\u4e2d\u6837\u672c\uff08\u72d7\uff09\u7684\u6570\u91cf\u8fdc\u8d85\u8fc7\u5176\u4ed6\u7c7b\u522b\uff08\u732b\u3001\u732a\uff09\u65f6\uff0c\u5982\u679c\u91c7\u7528Accuracy\u6765\u8bc4\u4f30\u5206\u7c7b\u5668\u7684\u597d\u574f\uff0c\u90a3\u4e48\u5373\u4fbf\u6a21\u578b\u6027\u80fd\u5f88\u5dee (\u5982\u65e0\u8bba\u8f93\u5165\u4ec0\u4e48\u56fe\u7247\uff0c\u90fd\u9884\u6d4b\u4e3a\u300c\u72d7\u300d)\uff0c\u4e5f\u53ef\u4ee5\u5f97\u5230\u8f83\u9ad8\u7684Accuracy Score\uff08\u598291%\uff09\u3002\u6b64\u65f6\uff0c\u867d\u7136Accuracy Score\u5f88\u9ad8\uff0c\u4f46\u662f\u610f\u4e49\u4e0d\u5927\u3002",(0,s.jsx)(n.strong,{children:"\u5f53\u6570\u636e\u5f02\u5e38\u4e0d\u5e73\u8861\u65f6\uff0cAccuracy\u8bc4\u4f30\u65b9\u6cd5\u7684\u7f3a\u9677\u5c24\u4e3a\u663e\u8457\u3002"})]}),"\n",(0,s.jsx)(n.h3,{id:"binary-classification---confusion-metrics",children:"Binary classification - Confusion Metrics"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/202204101351595.png",alt:""})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/202204101352098.png",alt:""}),"\n\u5176\u4e2d\uff0cPrecision\u7740\u91cd\u8bc4\u4f30",(0,s.jsx)(n.strong,{children:"\u5728\u9884\u6d4b\u4e3aPositive\u7684\u6240\u6709\u6570\u636e\u4e2d\uff0c\u771f\u5b9ePositve\u7684\u6570\u636e\u5230\u5e95\u5360\u591a\u5c11\uff1f"})]}),"\n",(0,s.jsxs)(n.p,{children:["Recall\u7740\u91cd\u8bc4\u4f30\uff1a",(0,s.jsx)(n.strong,{children:"\u5728\u6240\u6709\u7684Positive\u6570\u636e\u4e2d\uff0c\u5230\u5e95\u6709\u591a\u5c11\u6570\u636e\u88ab\u6210\u529f\u9884\u6d4b\u4e3aPositive?"})]}),"\n",(0,s.jsx)(n.p,{children:"\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4e00\u4e2a\u533b\u9662\u65b0\u5f00\u53d1\u4e86\u4e00\u5957\u764c\u75c7AI\u8bca\u65ad\u7cfb\u7edf\uff0c\u60f3\u8bc4\u4f30\u5176\u6027\u80fd\u597d\u574f\u3002\u6211\u4eec\u628a\u75c5\u4eba\u5f97\u4e86\u764c\u75c7\u5b9a\u4e49\u4e3aPositive\uff0c\u6ca1\u5f97\u764c\u75c7\u5b9a\u4e49\u4e3aNegative\u3002\u90a3\u4e48\uff0c \u5230\u5e95\u8be5\u7528\u4ec0\u4e48\u6307\u6807\u8fdb\u884c\u8bc4\u4f30\u5462\uff1f"}),"\n",(0,s.jsx)(n.p,{children:"\u5982\u7528Precision\u5bf9\u7cfb\u7edf\u8fdb\u884c\u8bc4\u4f30\uff0c\u90a3\u4e48\u5176\u56de\u7b54\u7684\u95ee\u9898\u5c31\u662f\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"\u5728\u8bca\u65ad\u4e3a\u764c\u75c7\u7684\u4e00\u5806\u4eba\u4e2d\uff0c\u5230\u5e95\u6709\u591a\u5c11\u4eba\u771f\u5f97\u4e86\u764c\u75c7\uff1f\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5982\u7528Recall\u5bf9\u7cfb\u7edf\u8fdb\u884c\u8bc4\u4f30\uff0c\u90a3\u4e48\u5176\u56de\u7b54\u7684\u95ee\u9898\u5c31\u662f\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"\u5728\u4e00\u5806\u5f97\u4e86\u764c\u75c7\u7684\u75c5\u4eba\u4e2d\uff0c\u5230\u5e95\u6709\u591a\u5c11\u4eba\u80fd\u88ab\u6210\u529f\u68c0\u6d4b\u51fa\u764c\u75c7\uff1f\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5982\u7528Accuracy\u5bf9\u7cfb\u7edf\u8fdb\u884c\u8bc4\u4f30\uff0c\u90a3\u4e48\u5176\u56de\u7b54\u7684\u95ee\u9898\u5c31\u662f\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"\u5728\u4e00\u5806\u764c\u75c7\u75c5\u4eba\u548c\u6b63\u5e38\u4eba\u4e2d\uff0c\u6709\u591a\u5c11\u4eba\u88ab\u7cfb\u7edf\u7ed9\u51fa\u4e86\u6b63\u786e\u8bca\u65ad\u7ed3\u679c\uff08\u60a3\u764c\u6216\u6ca1\u60a3\u764c\uff09\uff1f\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"OK\uff0c\u90a3\u5565\u65f6\u5019\u5e94\u8be5\u66f4\u6ce8\u91cdRecall\u800c\u4e0d\u662fPrecision\u5462\uff1f"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u5f53False Negative (FN)\u7684\u6210\u672c\u4ee3\u4ef7\u5f88\u9ad8 (\u540e\u679c\u5f88\u4e25\u91cd)\uff0c\u5e0c\u671b\u5c3d\u91cf\u907f\u514d\u4ea7\u751fFN\u65f6\uff0c\u5e94\u8be5\u7740\u91cd\u8003\u8651\u63d0\u9ad8Recall\u6307\u6807\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u4e0a\u8ff0\u4f8b\u5b50\u91cc\uff0cFalse Negative\u662f\u5f97\u4e86\u764c\u75c7\u7684\u75c5\u4eba\u6ca1\u6709\u88ab\u8bca\u65ad\u51fa\u764c\u75c7\uff0c\u8fd9\u79cd\u60c5\u51b5\u662f\u6700\u5e94\u8be5\u907f\u514d\u7684\u3002\u6211\u4eec\u5b81\u53ef\u628a\u5065\u5eb7\u4eba\u8bef\u8bca\u4e3a\u764c\u75c7 (FP)\uff0c\u4e5f\u4e0d\u80fd\u8ba9\u771f\u6b63\u60a3\u75c5\u7684\u4eba\u68c0\u6d4b\u4e0d\u51fa\u764c\u75c7 (FN) \u800c\u803d\u8bef\u6cbb\u7597\u79bb\u4e16\u3002\u5728\u8fd9\u91cc\uff0c\u764c\u75c7\u8bca\u65ad\u7cfb\u7edf\u7684\u76ee\u6807\u662f\uff1a\u5c3d\u53ef\u80fd\u63d0\u9ad8Recall\u503c\uff0c\u54ea\u6015\u727a\u7272\u4e00\u90e8\u5206Precision\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u90a3\u5565\u65f6\u5019\u5e94\u8be5\u66f4\u6ce8\u91cdPrecision\u800c\u4e0d\u662fRecall\u5462\uff1f"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u5f53False Positive (FP)\u7684\u6210\u672c\u4ee3\u4ef7\u5f88\u9ad8 (\u540e\u679c\u5f88\u4e25\u91cd)\u65f6\uff0c\u5373\u671f\u671b\u5c3d\u91cf\u907f\u514d\u4ea7\u751fFP\u65f6\uff0c\u5e94\u8be5\u7740\u91cd\u8003\u8651\u63d0\u9ad8Precision\u6307\u6807\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u4ee5\u5783\u573e\u90ae\u4ef6\u5c4f\u853d\u7cfb\u7edf\u4e3a\u4f8b\uff0c\u5783\u573e\u90ae\u4ef6\u4e3aPositive\uff0c\u6b63\u5e38\u90ae\u4ef6\u4e3aNegative\uff0cFalse Positive\u662f\u628a\u6b63\u5e38\u90ae\u4ef6\u8bc6\u522b\u4e3a\u5783\u573e\u90ae\u4ef6\uff0c\u8fd9\u79cd\u60c5\u51b5\u662f\u6700\u5e94\u8be5\u907f\u514d\u7684\uff08\u4f60\u80fd\u5bb9\u5fcd\u4e00\u5c01\u91cd\u8981\u5de5\u4f5c\u90ae\u4ef6\u76f4\u63a5\u8fdb\u4e86\u5783\u573e\u7bb1\uff0c\u88ab\u4e0d\u77e5\u4e0d\u89c9\u5220\u9664\u5417\uff1f\uff09\u3002\u6211\u4eec\u5b81\u53ef\u628a\u5783\u573e\u90ae\u4ef6\u6807\u8bb0\u4e3a\u6b63\u5e38\u90ae\u4ef6 (FN)\uff0c\u4e5f\u4e0d\u80fd\u8ba9\u6b63\u5e38\u90ae\u4ef6\u76f4\u63a5\u8fdb\u5783\u573e\u7bb1 (FP)\u3002\u5728\u8fd9\u91cc\uff0c\u5783\u573e\u90ae\u4ef6\u5c4f\u853d\u7cfb\u7edf\u7684\u76ee\u6807\u662f\uff1a\u5c3d\u53ef\u80fd\u63d0\u9ad8Precision\u503c\uff0c\u54ea\u6015\u727a\u7272\u4e00\u90e8\u5206recall\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u800cF1-score\u662fPrecision\u548cRecall\u4e24\u8005\u7684\u7efc\u5408\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u4e3e\u4e2a\u66f4\u6709\u610f\u601d\u7684\u4f8b\u5b50\uff0c\u5047\u8bbe\u68c0\u5bdf\u673a\u5173\u60f3\u5c06\u7f6a\u72af\u6349\u62ff\u5f52\u6848\uff0c\u9700\u8981\u5bf9\u6240\u6709\u4eba\u7fa4\u8fdb\u884c\u5206\u6790\uff0c\u4ee5\u5224\u65ad\u67d0\u4eba\u72af\u4e86\u7f6a\uff08Positive\uff09\uff0c\u8fd8\u662f\u6ca1\u72af\u7f6a\uff08Negative\uff09\u3002\u663e\u7136\uff0c\u68c0\u5bdf\u673a\u5173\u5e0c\u671b\u4e0d\u6f0f\u6389\u4e00\u4e2a\u7f6a\u4eba\uff08\u63d0\u9ad8recall\uff09\uff0c\u4e5f\u4e0d\u9519\u602a\u4e00\u4e2a\u597d\u4eba\uff08\u63d0\u9ad8precision\uff09\uff0c\u6240\u4ee5\u5c31\u9700\u8981\u540c\u65f6\u6743\u8861recall\u548cprecision\u4e24\u4e2a\u6307\u6807"}),"\n",(0,s.jsx)(n.p,{children:"\u5c24\u5176\u5728\u4e0a\u4e2a\u4e16\u7eaa\uff0c\u4e2d\u56fd\u53f8\u6cd5\u4f53\u5236\u4f1a\u66f4\u504f\u5411Recall\uff0c\u5373\u300c\u5929\u7f51\u6062\u6062\uff0c\u758f\u800c\u4e0d\u6f0f\uff0c\u4efb\u4f55\u7f6a\u72af\u90fd\u63d2\u7fc5\u96be\u98de\u300d\u3002\u800c\u897f\u65b9\u53f8\u6cd5\u7cfb\u7edf\u4f1a\u66f4\u504f\u5411Precision\uff0c\u5373\u300c\u7edd\u4e0d\u51a4\u6789\u4e00\u4e2a\u597d\u4eba\uff0c\u4f46\u662f\u96be\u514d\u6709\u7f6a\u72af\u6210\u4e3a\u6f0f\u7f51\u4e4b\u9c7c\uff0c\u900d\u9065\u6cd5\u5916\u300d\u3002\u5230\u5e95\u662f\u54ea\u79cd\u66f4\u597d\u5462\uff1f\u663e\u7136\uff0c\u6781\u7aef\u5e76\u4e0d\u53ef\u53d6\u3002Precision\u548cRecall\u90fd\u5e94\u8be5\u8d8a\u9ad8\u8d8a\u597d\uff0c\u4e5f\u5c31\u662fF1\u5e94\u8be5\u8d8a\u9ad8\u8d8a\u597d\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"why-does-f1-use-harmonic-mean-\u8c03\u548c\u5e73\u5747\u503c-of-recall-and-precision",children:"Why does F1 use harmonic mean \u8c03\u548c\u5e73\u5747\u503c of recall and precision?"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/202209271200324.png",alt:""})}),"\n",(0,s.jsx)(n.p,{children:"\u7406\u89e31\uff1a"}),"\n",(0,s.jsx)(n.p,{children:"Precision and recall both have true positives in the numerator, and different denominators. To average them it really only makes sense to average their reciprocals, thus the harmonic mean."}),"\n",(0,s.jsx)(n.p,{children:"\u7406\u89e32:"}),"\n",(0,s.jsxs)(n.p,{children:["Consider a ",(0,s.jsx)(n.em,{children:"trivial"})," method (e.g. always returning class A). There are infinite data elements of class B, and a single element of class A:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Precision: 0.0\nRecall:    1.0\n"})}),"\n",(0,s.jsxs)(n.p,{children:["When taking the arithmetic mean, it would have 50% correct. Despite being the ",(0,s.jsx)(n.em,{children:"worst"})," possible outcome! With the harmonic mean, the F1-measure is 0."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Arithmetic mean: 0.5\nHarmonic mean:   0.0\n"})}),"\n",(0,s.jsxs)(n.p,{children:["In other words, to have a high F1, you need to ",(0,s.jsx)(n.em,{children:"both"})," have a high precision and recall."]}),"\n",(0,s.jsx)(n.h3,{id:"multi-class-classification",children:"Multi-Class Classification"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/202204101356521.png",alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/202204101357554.png",alt:""})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/202204101358424.png",alt:""})}),"\n",(0,s.jsx)(n.h3,{id:"roc",children:"ROC"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/202204101354287.png",alt:""})}),"\n",(0,s.jsx)(n.h3,{id:"auc",children:"AUC"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/classification-metrics-1.png",alt:""})}),"\n",(0,s.jsx)(n.h4,{id:"interpreting-auc",children:"Interpreting AUC:"}),"\n",(0,s.jsxs)(n.p,{children:["One way of interpreting AUC is as ",(0,s.jsx)(n.strong,{children:"the probability that the model ranks a random positive example more highly than a random negative example"}),". For example, given the following examples, which are arranged from left to right in ascending order of logistic regression predictions:\n",(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/classification-metrics-6.png",alt:""}),"\nAUC represents the probability that a random positive (green) example is positioned to the right of a random negative (red) example."]}),"\n",(0,s.jsx)(n.p,{children:"AUC ranges in value from 0 to 1. A model whose predictions are 100% wrong has an AUC of 0.0; one whose predictions are 100% correct has an AUC of 1.0."}),"\n",(0,s.jsx)(n.h2,{id:"precision---recall-tradeoff",children:"Precision - Recall Tradeoff"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/classification-metrics-2.png",alt:""}),"\n",(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/classification-metrics-3.png",alt:""}),"\n",(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/classification-metrics-4.png",alt:""}),"\n",(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/classification-metrics-5.png",alt:""})]}),"\n",(0,s.jsx)(n.h2,{id:"manually-generate-precision-recall-pr-curve",children:"Manually generate Precision-Recall (PR) curve"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"real_y"}),(0,s.jsx)(n.th,{children:"predicted score"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"0.23"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"0.5"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"0.9"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"0.3"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"0.8"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"0.3"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"0.1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"0.8"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"0.2"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"0.7"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"0.5"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"if we sort the table using y and score, and assign them to categories based on the threshold = 0.4:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"< 0.4: we predict to be 0, negative"}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"= 0.4, we predict to be 1, positive"}),"\n"]}),"\n"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"real_y"}),(0,s.jsx)(n.th,{children:"predicted score"}),(0,s.jsx)(n.th,{children:"pred_y"}),(0,s.jsx)(n.th,{children:"category"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"0.23"}),(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"TN"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"0.3"}),(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"TN"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"0.5"}),(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"FP \uff08\u6ca1\u6709\u764c\u75c7\u7684\u88ab\u67e5\u51fa\u764c\u75c7\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"0.8"}),(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"FP"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"0.9"}),(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"FP"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"0.1"}),(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"FN \uff08\u6709\u764c\u75c7\u7684\u6ca1\u6709\u88ab\u68c0\u67e5\u51fa\u6765\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"0.2"}),(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"FN"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"0.3"}),(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"FN"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"0.5"}),(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"TP"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"0.7"}),(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"TP"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"0.8"}),(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"TP"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Precision = TP/(FP + TP)\nRecall = TP/(FN + TP)"}),"\n",(0,s.jsx)(n.p,{children:"real_y = [0,0,0,0,0,1,1,1,1,1,1] (calling it y)\npredicted_score = [0.23, 0.5, 0.9, 0.3, 0.8, 0.3, 0.1, 0.8, 0.2, 0.7, 0.5] (calling it score)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"def bisect_left(arr, target):\n    l, r = -1, len(arr)\n    while l + 1 < r:\n        mid = (l + r) // 2\n        if arr[mid] < target:\n            l = mid\n        else:\n            r = mid\n    return l + 1\n\ndef generate_curve(y, score):\n    # return pairs of points, e.g.,  [(0.9, 0.7),...., (0.2, 0.2)], \n    # each tuple refers to (recall, precision)\n    real_neg = []\n    real_pos = []\n    for i, ele in enumerate(y):\n        if ele == 0:\n            real_neg.append(score[i])\n        else:\n            real_pos.append(score[i])\n    real_neg.sort()\n    real_pos.sort()\n    res = []\n    for i in range(11): # range does not work with floating numbers\n        thres = i/10\n        tn = bisect_left(real_neg, thres) # \u4e5f\u5c31\u662ffp\u7684start, \n        # \u4f18\u5316\u7684\u65f6\u5019\u53ef\u4ee5\u628abinary search \u7684\u8d77\u59cb\u70b9l\u66f4\u65b0\u6210\u4e0a\u4e00\u6b21\u7684tn\n        fp = len(real_neg) - tn\n        fn = bisect_left(real_pos, thres) # \u4e5f\u5c31\u662ftp\u7684start, \n        # \u4f18\u5316\u7684\u65f6\u5019\u53ef\u4ee5\u628abinary search \u7684\u8d77\u59cb\u70b9l\u66f4\u65b0\u6210\u4e0a\u4e00\u6b21\u7684tp \n        tp = len(real_pos) - fn\n        precision = tp/(fp + tp) if fp + tp else 0\n        recall = tp/(fn + tp)\n        res.append((precision, recall))\n    return res\n\n\ny = [0,0,0,0,0,1,1,1,1,1,1]\nscore = [0.23, 0.5, 0.9, 0.3, 0.8, 0.3, 0.1, 0.8, 0.2, 0.7, 0.5]\ncurve_points = generate_curve(y, score)\nprint(curve_points)\n# print\u7684\u7ed3\u679c\u662f\u4e0b\u9762\uff0cthres \u662f0.4\u7684\u65f6\u5019\u786e\u5b9e\u662f (0.5, 0.5)\n# [(0.5454545454545454, 1.0), (0.5454545454545454, 1.0), (0.5, 0.8333333333333334), (0.5, 0.6666666666666666), (0.5, 0.5), (0.5, 0.5), (0.5, 0.3333333333333333), (0.5, 0.3333333333333333), (0.3333333333333333, 0.16666666666666666), (0.0, 0.0), (0, 0.0)]\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);