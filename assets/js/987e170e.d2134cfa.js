"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[9701],{28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>c});var t=s(96540);const d={},r=t.createContext(d);function i(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:i(e.components),t.createElement(r.Provider,{value:n},e.children)}},67933:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"Leetcode/Binary Search/1146.1146 - Snapshot Array - Medium","title":"1146.1146 - Snapshot Array - Medium","description":"LC link","source":"@site/docs/Leetcode/02.Binary Search/1146.1146 - Snapshot Array - Medium.md","sourceDirName":"Leetcode/02.Binary Search","slug":"/p/e7fe562f-68f9-4060-9d9d-065d2611ccd1","permalink":"/notes/docs/p/e7fe562f-68f9-4060-9d9d-065d2611ccd1","draft":false,"unlisted":false,"editUrl":"https://github.com/emmableu/notes/edit/main/docs/Leetcode/02.Binary Search/1146.1146 - Snapshot Array - Medium.md","tags":[],"version":"current","frontMatter":{"created_at":"2025-10-23","page_link":"/p/e7fe562f-68f9-4060-9d9d-065d2611ccd1","slug":"/p/e7fe562f-68f9-4060-9d9d-065d2611ccd1"},"sidebar":"tutorialSidebar","previous":{"title":"1060.1060 - Missing Element in Sorted Array (Medium)","permalink":"/notes/docs/p/08bc37ec-d3fc-4668-bdfe-4c09dddefac0"},"next":{"title":"1428.1428 - Leftmost Column with at Least a One - Medium","permalink":"/notes/docs/p/d40e3fc4-ebce-4130-9663-fc5ab13f9aa6"}}');var d=s(74848),r=s(28453);const i={created_at:"2025-10-23",page_link:"/p/e7fe562f-68f9-4060-9d9d-065d2611ccd1",slug:"/p/e7fe562f-68f9-4060-9d9d-065d2611ccd1"},c=void 0,l={},a=[{value:"Solution",id:"solution",level:2}];function o(e){const n={a:"a",br:"br",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"https://leetcode.cn/problems/snapshot-array/",children:"LC link"})}),"\n",(0,d.jsx)(n.img,{src:"https://user-images.githubusercontent.com/41789327/180663794-6387c8ff-fe34-4e55-ad72-3fe4642571f4.png"}),"\n",(0,d.jsx)(n.h2,{id:"solution",children:"Solution"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"https://leetcode.com/problems/snapshot-array/discuss/350562/JavaPython-Binary-Search",children:"reference"})}),"\n",(0,d.jsx)(n.p,{children:"\u4e3a\u4ec0\u4e48\u8981\u7528binary search\uff1a\u56e0\u4e3a\u6709\u7684snapshot id\u4e0d\u4f1a\u5b58\u5728\u67d0\u4e2aindex\u4e0a\uff0ce.g., update \u7b2c\u4e00\u4e2a\u70b9\u7684\u65f6\u5019\uff0c\u7b2c\u4e09\u4e2a\u70b9\u4e0d\u4f1a\u5b58\u4e00\u4e2a\u65b0\u7684snapshot id"}),"\n",(0,d.jsxs)(n.p,{children:["\u8bb0\u5f55\u6bcf\u4e2acell \u7684\u5386\u53f2\uff0c \u5c31\u662f\u6bcf\u4e2asnap_id \u5bf9\u5e94\u7684\u503c\u3002",(0,d.jsx)(n.br,{}),"\n\u7136\u540e\u7528get\u53d6\u8fd9\u4e2acell\u5728\u67d0\u4e2asnap_id\u7684\u503c\u7684\u65f6\u5019\uff0c\u5c31\u7528binary_search\u627e\u5230\u5bf9\u5e94\u7684\u65f6\u95f4\u70b9"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Complexity"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Time\xa0",(0,d.jsx)(n.code,{children:"O(logS)"})]}),"\n",(0,d.jsxs)(n.li,{children:["Space\xa0",(0,d.jsx)(n.code,{children:"O(S)"})]}),"\n",(0,d.jsxs)(n.li,{children:["where\xa0",(0,d.jsx)(n.code,{children:"S"}),"\xa0is the number of\xa0",(0,d.jsx)(n.code,{children:"set"}),"\xa0called."]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"SnapshotArray(int length)"}),"\xa0is\xa0",(0,d.jsx)(n.code,{children:"O(N)"}),"\xa0time"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"set(int index, int val)"}),"\xa0is O(1) in Python and\xa0",(0,d.jsx)(n.code,{children:"O(logSnap)"}),"\xa0in Java"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"snap()"}),"\xa0is\xa0",(0,d.jsx)(n.code,{children:"O(1)"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"get(int index, int snap_id)"}),"\xa0is\xa0",(0,d.jsx)(n.code,{children:"O(logSnap)"})]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"input"}),(0,d.jsx)(n.th,{children:"self.sid"}),(0,d.jsx)(n.th,{children:"self.arr"}),(0,d.jsx)(n.th,{children:"return"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"snapshotArr = SnapshotArray(3)"}),(0,d.jsx)(n.td,{children:"0"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"[[[-1, 0]], [[-1, 0]], [[-1,0]]]"})}),(0,d.jsx)(n.td,{children:"None"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"snapshotArr.set(0, 5)"}),(0,d.jsx)(n.td,{children:"0"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"[[[-1, 0], [0, 5]], [[-1, 0]], [[-1, 0]]]"})}),(0,d.jsx)(n.td,{children:"None"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"snapshotArr.snap()"}),(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"[[[-1, 0], [0, 5]], [[-1, 0]], [[-1, 0]]]"})}),(0,d.jsx)(n.td,{children:"0"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"snapshotArr.set(0, 6)"}),(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"[[[-1, 0], [0, 5], [1, 6]], [[-1, 0]], [[-1, 0]]]"})}),(0,d.jsx)(n.td,{children:"None"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"snapshotArr.get(0, 0)"}),(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"[[[-1, 0], [0, 5], [1, 6]], [[-1, 0]], [[-1, 0]]]"})}),(0,d.jsx)(n.td,{children:"5"})]})]})]}),"\n",(0,d.jsxs)(n.p,{children:["\u4e3a\u4ec0\u4e48\u7528\u4e8c\u5206\u641c\u7d22\u8981\u6bd4\u8f83",(0,d.jsx)(n.code,{children:"self.arr[index][0]"}),"  \u548c",(0,d.jsx)(n.code,{children:"sid"}),", \u800c\u4e0d\u662f\u6bd4\u8f83 ",(0,d.jsx)(n.code,{children:"self.arr[index]"}),"\u548c ",(0,d.jsx)(n.code,{children:"[sid]"}),":"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u56e0\u4e3alist\u4e4b\u95f4\u53ef\u4ee5\u6bd4\u8f83\u5927\u5c0f\u8981\u770b\u7b2c\u4e8c\u4e2a\u5143\u7d20\uff0c \u89c1\u4e0b\u56fe\u3002\u800c\u6211\u4eec\u5e0c\u671b\u7684\u6bd4\u8f83\u65b9\u5f0f\u662f  \u5e0c\u671b \u30100\u3011 \u548c \u30100\uff0c 1\u3011 \u80fd\u662f\u76f8\u7b49\u7684 \uff08\u8fd9\u6837\u53ef\u4ee5\u7528\u4e8c\u5206\u641c\u7d22\u67e5\u627e\u4e0a\u754c\u7684\u6a21\u7248\uff09\u3002\n",(0,d.jsx)(n.img,{width:"555",alt:"image",src:"https://user-images.githubusercontent.com/41789327/180695696-8d94d834-7e95-404d-81f4-b9f1493d27c5.png"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:"class SnapshotArray:\n\n\tdef __init__(self, n):\n\t\tself.arr = [[[-1, 0]] for _ in range(n)]\n\t\tself.sid = 0\n\n\tdef set(self, index, val):\n\t\tself.arr[index].append([self.sid, val])\n\n\tdef snap(self):\n\t\tself.sid += 1\n\t\treturn self.sid - 1\n\n\tdef get(self, index, sid):\n\t\tl, r = -1, len(self.arr[index])\n\t\twhile l + 1 < r:\n\t\t\tmid = (l + r) // 2\n\t\t\tif self.arr[index][mid][0] <= sid:\n\t\t\t\tl = mid\n\t\t\telse:\n\t\t\t\tr = mid \n\t\treturn self.arr[index][r-1][1]\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}}}]);