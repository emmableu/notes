"use strict";(globalThis.webpackChunknotes=globalThis.webpackChunknotes||[]).push([[23212],{28453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>i});var d=t(96540);const l={},s=d.createContext(l);function r(n){const e=d.useContext(s);return d.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:r(n.components),d.createElement(s.Provider,{value:e},n.children)}},99787:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>o});const d=JSON.parse('{"id":"Leetcode/Segment Tree/\u7ebf\u6bb5\u6811 - Segment Tree - \u6a21\u7248","title":"\u7ebf\u6bb5\u6811 - Segment Tree - \u6a21\u7248","description":"reference","source":"@site/docs/03. Leetcode/13.Segment Tree/12.\u7ebf\u6bb5\u6811 - Segment Tree - \u6a21\u7248.md","sourceDirName":"03. Leetcode/13.Segment Tree","slug":"/p/25536f23-3142-4263-9a3d-e5e9a50b683f","permalink":"/notes/docs/p/25536f23-3142-4263-9a3d-e5e9a50b683f","draft":false,"unlisted":false,"editUrl":"https://github.com/emmableu/notes/edit/main/docs/03. Leetcode/13.Segment Tree/12.\u7ebf\u6bb5\u6811 - Segment Tree - \u6a21\u7248.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"created_at":"2025-10-23","page_link":"/p/25536f23-3142-4263-9a3d-e5e9a50b683f","slug":"/p/25536f23-3142-4263-9a3d-e5e9a50b683f"},"sidebar":"tutorialSidebar","previous":{"title":"13.Segment Tree","permalink":"/notes/docs/category/13segment-tree"},"next":{"title":"715.715 - Range Module - Hard","permalink":"/notes/docs/p/6490f1a8-40ff-4995-84f5-3b54819c37c6"}}');var l=t(74848),s=t(28453);const r={created_at:"2025-10-23",page_link:"/p/25536f23-3142-4263-9a3d-e5e9a50b683f",slug:"/p/25536f23-3142-4263-9a3d-e5e9a50b683f"},i=void 0,a={},o=[{value:"Segment Tree \u9898\u6c47\u603b",id:"segment-tree-\u9898\u6c47\u603b",level:2},{value:"\u7ebf\u6bb5\u6811\u5f15\u5165",id:"\u7ebf\u6bb5\u6811\u5f15\u5165",level:2},{value:"\u7ebf\u6bb5\u6811\u539f\u7406\u53ca\u5b9e\u73b0",id:"\u7ebf\u6bb5\u6811\u539f\u7406\u53ca\u5b9e\u73b0",level:2},{value:"\u7ebf\u6bb5\u6811\u7684\u6570\u636e\u7ed3\u6784",id:"\u7ebf\u6bb5\u6811\u7684\u6570\u636e\u7ed3\u6784",level:2},{value:"\u7ebf\u6bb5\u6811\u7684\u5efa\u7acb",id:"\u7ebf\u6bb5\u6811\u7684\u5efa\u7acb",level:2},{value:"\u7ebf\u6bb5\u6811\u7684\u66f4\u65b0",id:"\u7ebf\u6bb5\u6811\u7684\u66f4\u65b0",level:2},{value:"\u7ebf\u6bb5\u6811\u7684\u67e5\u8be2",id:"\u7ebf\u6bb5\u6811\u7684\u67e5\u8be2",level:3},{value:"\u4ee3\u7801\u6c47\u603b",id:"\u4ee3\u7801\u6c47\u603b",level:2},{value:"\u4f8b\u9898 \u6309\u96be\u5ea6\u4ece\u7b80\u5355\u5230\u96be",id:"\u4f8b\u9898-\u6309\u96be\u5ea6\u4ece\u7b80\u5355\u5230\u96be",level:2}];function c(n){const e={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://leetcode.cn/problems/range-module/solution/by-lfool-eo50/",children:"reference"})}),"\n",(0,l.jsx)(e.h2,{id:"segment-tree-\u9898\u6c47\u603b",children:"Segment Tree \u9898\u6c47\u603b"}),"\n",(0,l.jsx)(e.p,{children:"\u6a21\u7248\u9898\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"/pages/ea468b/",children:"146 - 731 - My Calendar II - Medium \u53ef\u53cc\u91cd\u9884\u5b9a"})," \u6ce8\u610f\u5728pushdown\u7684\u65f6\u5019\u4e0d\u80fd\u5199\uff1a",(0,l.jsx)(e.code,{children:"node.left.time_left = node.time_left"}),"\uff0c \u4e0b\u63a8\u61d2\u60f0\u6807\u8bb0\u65f6\u9700\u8981\u7d2f\u52a0\u8d77\u6765\uff0c\u4e0d\u80fd\u76f4\u63a5\u8986\u76d6"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u6309\u96be\u5ea6\u4ece\u7b80\u5355\u5230\u96be"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"/pages/060d0d/",children:"My Calendar III"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8fd9\u4e2a\u9898\u4e0d\u9700\u8981\u5b9e\u73b0query\u65b9\u6cd5"}),"\n",(0,l.jsx)(e.li,{children:"\u800c\u4e14\u4e0d\u9700\u8981val\uff0c\u56e0\u4e3a\u6bcf\u6b21\u5728update\u7684\u65f6\u5019val\u90fd\u662f1"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"/pages/583d16/",children:"Range Module"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8fd9\u4e2a\u9898val\u53ea\u8981\u662ftrue / false \u5c31\u597d"}),"\n",(0,l.jsx)(e.li,{children:"add\u4e5f\u53ea\u8981\u662f none/true/false \u5c31\u597d"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"/pages/bb1451/",children:"2158 - Amount of New Area Painted Each Day"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"/pages/246121/",children:"729 - My Calendar I"})}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u7ebf\u6bb5\u6811\u5f15\u5165",children:"\u7ebf\u6bb5\u6811\u5f15\u5165"}),"\n",(0,l.jsx)(e.p,{children:"\u7ebf\u6bb5\u6811\u662f\u4e00\u79cd\u4e8c\u53c9\u641c\u7d22\u6811\uff0c\u5b83\u5c06\u4e00\u4e2a\u533a\u95f4\u5212\u5206\u6210\u4e00\u4e9b\u5355\u5143\u533a\u95f4\uff0c\u6bcf\u4e2a\u5355\u5143\u533a\u95f4\u5bf9\u5e94\u7ebf\u6bb5\u6811\u4e2d\u7684\u4e00\u4e2a\u53f6\u7ed3\u70b9\uff0c\u4f7f\u7528\u7ebf\u6bb5\u6811\u53ef\u4ee5\u5feb\u901f\u7684\u5bf9\u533a\u95f4\u8fdb\u884c\u4fee\u6539\u548c\u67e5\u8be2\u3002\n\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u6570\u7ec4\u4e3a[1,2,3,4,5,6,7,8],\u5219\u6211\u4eec\u8868\u793a\u4e3a\u4e00\u4e2a\u533a\u95f4\u548c\u7ebf\u6bb5\u6811\u5c31\u662f\u4e0b\u56fe\u8fd9\u4e2a\u6837\u5b50"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://pic.leetcode-cn.com/1655703141-SeyQrR-image.png",alt:"image.png"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u7ebf\u6bb5\u6811\u89e3\u51b3\u7684\u662f\u300c\u533a\u95f4\u548c\u300d\u7684\u95ee\u9898\uff0c\u4e14\u8be5\u300c\u533a\u95f4\u300d\u4f1a\u88ab\u4fee\u6539"})}),"\n",(0,l.jsx)(e.p,{children:"\u4ec0\u4e48\u610f\u601d\u5462\uff1f\u4e3e\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u5bf9\u4e8e nums = [1, 2, 3, 4, 5]"}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u679c\u6211\u4eec\u9700\u8981\u591a\u6b21\u6c42\u67d0\u4e00\u4e2a\u533a\u95f4\u7684\u548c\uff0c\u662f\u4e0d\u662f\u9996\u5148\u60f3\u5230\u4e86\u5229\u7528\u300c\u524d\u7f00\u548c\u300d\u3002\u5173\u4e8e\u524d\u7f00\u548c\u7684\u8be6\u7ec6\u4ecb\u7ecd\u53ef\u89c1 \u524d\u7f00\u548c\u6570\u7ec4"}),"\n",(0,l.jsx)(e.p,{children:"\u4f46\u662f\u5982\u679c nums \u4f1a\u88ab\u4fee\u6539\u5462\uff1f\u6bd4\u5982\uff1a"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u628a\u7b2c i \u4e2a\u5143\u7d20\u4fee\u6539\u6210 x"}),"\n",(0,l.jsx)(e.li,{children:"\u628a\u7b2c i \u4e2a\u5143\u7d20\u589e\u52a0 x"}),"\n",(0,l.jsx)(e.li,{children:"\u628a\u533a\u95f4 [i, j] \u5185\u7684\u5143\u7d20\u90fd\u589e\u52a0 x"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u6b64\u65f6\uff0c\u5982\u679c\u6211\u4eec\u518d\u4f7f\u7528\u300c\u524d\u7f00\u548c\u300d\uff0c\u5c31\u6ca1\u90a3\u4e48\u9ad8\u6548\u4e86\u3002\u56e0\u4e3a\u6bcf\u4e00\u6b21\u66f4\u65b0\uff0c\u524d\u7f00\u548c\u6570\u7ec4\u5fc5\u987b\u4e5f\u968f\u4e4b\u66f4\u65b0\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(n)"}),"\n",(0,l.jsx)(e.p,{children:"\u65e2\u7136\u300c\u524d\u7f00\u548c\u300d\u5728\u8fd9\u79cd\u573a\u666f\u4e0b\u6ca1\u90a3\u4e48\u9ad8\u6548\u4e86\uff0c\u6240\u4ee5\u5c31\u6709\u4e86\u4eca\u5929\u8981\u4ecb\u7ecd\u7684\u300c\u7ebf\u6bb5\u6811\u300d"}),"\n",(0,l.jsx)(e.h2,{id:"\u7ebf\u6bb5\u6811\u539f\u7406\u53ca\u5b9e\u73b0",children:"\u7ebf\u6bb5\u6811\u539f\u7406\u53ca\u5b9e\u73b0"}),"\n",(0,l.jsx)(e.p,{children:"\u4e0a\u9762\u63d0\u5230\u8fc7\uff1a\u7ebf\u6bb5\u6811\u89e3\u51b3\u7684\u662f\u300c\u533a\u95f4\u548c\u300d\u7684\u95ee\u9898\uff0c\u4e14\u8be5\u300c\u533a\u95f4\u300d\u4f1a\u88ab\u4fee\u6539"}),"\n",(0,l.jsx)(e.p,{children:"\u6240\u4ee5\u7ebf\u6bb5\u6811\u4e3b\u8981\u5b9e\u73b0\u4e24\u4e2a\u65b9\u6cd5\uff1a\u300c\u6c42\u533a\u95f4\u548c\u300d&&\u300c\u4fee\u6539\u533a\u95f4\u300d\uff0c\u4e14\u65f6\u95f4\u590d\u6742\u5ea6\u5747\u4e3a O(logn)"}),"\n",(0,l.jsxs)(e.p,{children:["\u59cb\u7ec8\u8bb0\u4f4f\u4e00\u53e5\u8bdd\uff1a",(0,l.jsx)(e.strong,{children:"\u7ebf\u6bb5\u6811\u7684\u6bcf\u4e2a\u8282\u70b9\u4ee3\u8868\u4e00\u4e2a\u533a\u95f4"})]}),"\n",(0,l.jsx)(e.p,{children:"nums = [1, 2, 3, 4, 5] \u5bf9\u5e94\u7684\u7ebf\u6bb5\u6811\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://pic.leetcode-cn.com/1654588271-zbOpBr-1.svg",alt:"1.svg"})}),"\n",(0,l.jsx)(e.p,{children:"\u4ece\u56fe\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c\u6bcf\u4e2a\u8282\u70b9\u4ee3\u8868\u4e00\u4e2a\u533a\u95f4\uff0c\u800c\u8282\u70b9\u7684\u503c\u5c31\u662f\u8be5\u533a\u95f4\u7684\u548c (\u5176\u5b9e\u8fd8\u53ef\u4ee5\u6839\u636e\u9898\u76ee\u95ee\u9898\uff0c\u6539\u53d8\u8868\u793a\u7684\u542b\u4e49)"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6570\u5b57\u4e4b\u548c\u300c\u603b\u6570\u5b57\u4e4b\u548c = \u5de6\u533a\u95f4\u6570\u5b57\u4e4b\u548c + \u53f3\u533a\u95f4\u6570\u5b57\u4e4b\u548c\u300d"}),"\n",(0,l.jsx)(e.li,{children:"\u6700\u5927\u516c\u56e0\u6570 (GCD)\u300c\u603b GCD = gcd(\u5de6\u533a\u95f4 GCD, \u53f3\u533a\u95f4 GCD)\u300d"}),"\n",(0,l.jsx)(e.li,{children:"\u6700\u5927\u503c\u300c\u603b\u6700\u5927\u503c = max(\u5de6\u533a\u95f4\u6700\u5927\u503c\uff0c\u53f3\u533a\u95f4\u6700\u5927\u503c)\u300d\n\u4e0d\u7b26\u5408\u533a\u95f4\u52a0\u6cd5\u7684\u4f8b\u5b50\uff1a"}),"\n",(0,l.jsx)(e.li,{children:"\u4f17\u6570\u300c\u53ea\u77e5\u9053\u5de6\u53f3\u533a\u95f4\u7684\u4f17\u6570\uff0c\u6ca1\u6cd5\u6c42\u603b\u533a\u95f4\u7684\u4f17\u6570\u300d"}),"\n",(0,l.jsx)(e.li,{children:"01 \u5e8f\u5217\u7684\u6700\u957f\u8fde\u7eed\u96f6\u300c\u53ea\u77e5\u9053\u5de6\u53f3\u533a\u95f4\u7684\u6700\u957f\u8fde\u7eed\u96f6\uff0c\u6ca1\u6cd5\u77e5\u9053\u603b\u7684\u6700\u957f\u8fde\u7eed\u96f6\u300d"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u6839\u8282\u70b9\u4ee3\u8868\u7684\u533a\u95f4\u662f\u95ee\u9898\u7684\u603b\u533a\u95f4\uff0c\u5982\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u95ee\u9898\u7684\u603b\u533a\u95f4\u5c31\u662f\u6570\u7ec4\u7684\u957f\u5ea6 [0, 4]",(0,l.jsx)(e.br,{}),"\n\u5176\u5b9e\u7ebf\u6bb5\u6811\u662f\u4e00\u68f5\u8fd1\u4f3c\u7684\u5b8c\u5168\u4e8c\u53c9\u6811\uff0c\u8be5\u4f8b\u5b50\u5c31\u662f\u4e00\u68f5\u5b8c\u5168\u4e8c\u53c9\u6811\uff0c\u4f46\u662f\u6709\u4e9b\u60c5\u51b5\u4e0d\u662f\u5b8c\u5168\u4e8c\u53c9\u6811",(0,l.jsx)(e.br,{}),"\n\u6240\u4ee5\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u4e00\u4e2a\u95ee\u9898\uff0c\u5982\u679c\u8be5\u95ee\u9898\u7684\u8303\u56f4\u662f\u786e\u5b9a\u7684\uff0c\u90a3\u4e48\u8be5\u95ee\u9898\u7684\u7ebf\u6bb5\u6811\u4e5f\u662f\u786e\u5b9a\u7684\uff0c\u56e0\u4e3a\u5efa\u7acb\u7ebf\u6bb5\u6811\u7684\u8fc7\u7a0b\u5c31\u662f\u4e0d\u65ad\u628a\u533a\u95f4\u300c\u5e73\u5206\u300d\u7684\u8fc7\u7a0b\uff0c\u76f4\u5230\u533a\u95f4\u957f\u5ea6\u4e3a 1"]}),"\n",(0,l.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u4e0b\u9762\u7684\u6240\u6709\u5b9e\u73b0\u5747\u57fa\u4e8e\u6c42\u300c\u533a\u95f4\u548c\u300d\u4ee5\u53ca\u5bf9\u533a\u95f4\u8fdb\u884c\u300c\u52a0\u51cf\u300d\u7684\u66f4\u65b0\u64cd\u4f5c"}),"\n",(0,l.jsx)(e.h2,{id:"\u7ebf\u6bb5\u6811\u7684\u6570\u636e\u7ed3\u6784",children:"\u7ebf\u6bb5\u6811\u7684\u6570\u636e\u7ed3\u6784"}),"\n",(0,l.jsx)(e.p,{children:"\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6570\u7ec4\u6765\u8868\u793a\u4e00\u68f5\u7ebf\u6bb5\u6811\uff0c\u5047\u5982\u6839\u8282\u70b9\u4e3a i\uff0c\u90a3\u4e48\u5de6\u5b69\u5b50\u7684\u8282\u70b9\u5c31\u4e3a 2 * i\uff0c\u53f3\u5b69\u5b50\u7684\u8282\u70b9\u5c31\u4e3a 2 * i + 1 (\u524d\u63d0\uff1ai \u4ece 1 \u5f00\u59cb)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:"class SegmentNode:\n\tdef __init__(self):\n\t\tself.left = None # SegmentNode\n\t\tself.right = None # SegmentNode\n\t\tself.val = 0 # \u8868\u793a\u5f53\u524d\u8282\u70b9\u503c\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u7ebf\u6bb5\u6811\u7684\u5efa\u7acb",children:"\u7ebf\u6bb5\u6811\u7684\u5efa\u7acb"}),"\n",(0,l.jsxs)(e.p,{children:["\u5982\u679c\u9898\u76ee\u4e2d\u7ed9\u4e86\u5177\u4f53\u7684\u533a\u95f4\u8303\u56f4\uff0c\u6211\u4eec\u6839\u636e\u8be5\u8303\u56f4\u5efa\u7acb\u7ebf\u6bb5\u6811\u3002",(0,l.jsxs)(e.strong,{children:["\u89c1\u9898\u76ee\xa0",(0,l.jsx)(e.a,{href:"https://leetcode.cn/problems/range-sum-query-mutable/",children:"\u533a\u57df\u548c\u68c0\u7d22 - \u6570\u7ec4\u53ef\u4fee\u6539"})]})]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:"def build_tree(node, start, end):\n\t# \u5230\u8fbe\u53f6\u5b50\u7ed3\u70b9\n\tif start == end:\n\t\tnode.val = arr[start]\n\t\treturn \n\tmid = (start + end) // 2\n\tbuild_tree(node.left, start, mid)\n\tbuild_tree(node.right, mid + 1, end)\n\t# \u5411\u4e0a\u66f4\u65b0\n\tpush_up(node)\n\t\ndef push_up(node):\n\tnode.val = node.left.val + node.right.val\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4f46\u662f\u5f88\u591a\u65f6\u5019\uff0c\u9898\u76ee\u4e2d\u90fd\u6ca1\u6709\u7ed9\u51fa\u5f88\u5177\u4f53\u7684\u8303\u56f4\uff0c\u53ea\u6709\u6570\u636e\u7684\u53d6\u503c\u8303\u56f4\uff0c\u4e00\u822c\u90fd\u5f88\u5927\uff0c\u6240\u4ee5\u6211\u4eec\u66f4\u5e38\u7528\u7684\u662f\u300c\u52a8\u6001\u5f00\u70b9\u300d"}),"\n",(0,l.jsx)(e.p,{children:"\u4e0b\u9762\u6211\u4eec\u624b\u52a8\u6a21\u62df\u4e00\u4e0b\u300c\u52a8\u6001\u5f00\u70b9\u300d\u7684\u8fc7\u7a0b\u3002\u540c\u6837\u7684\uff0c\u4e5f\u662f\u57fa\u4e8e\u4e0a\u9762\u7684\u4f8b\u5b50 nums = [1, 2, 3, 4, 5]"}),"\n",(0,l.jsx)(e.p,{children:"\u5047\u8bbe\u4e00\u79cd\u60c5\u51b5\uff0c\u6700\u5f00\u59cb\u53ea\u77e5\u9053\u6570\u7ec4\u7684\u957f\u5ea6 5\uff0c\u800c\u4e0d\u77e5\u9053\u6570\u7ec4\u5185\u6bcf\u4e2a\u5143\u7d20\u7684\u5927\u5c0f\uff0c\u5143\u7d20\u90fd\u662f\u540e\u9762\u6dfb\u52a0\u8fdb\u53bb\u7684\u3002\u6240\u4ee5\u7ebf\u6bb5\u6811\u7684\u521d\u59cb\u72b6\u6001\u5982\u4e0b\u56fe\u6240\u793a\uff1a(\u53ea\u6709\u4e00\u4e2a\u8282\u70b9)"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://pic.leetcode-cn.com/1655808248-EfPSRV-1.svg",alt:"1.svg"})}),"\n",(0,l.jsxs)(e.p,{children:["\u5047\u8bbe\u6b64\u65f6\uff0c\u6211\u4eec\u6dfb\u52a0\u4e86\u4e00\u4e2a\u5143\u7d20\xa0",(0,l.jsx)(e.code,{children:"[2, 2]; val = 3"}),"\u3002\u73b0\u5728\u7ebf\u6bb5\u6811\u7684\u7ed3\u6784\u5982\u4e0b\u56fe\u6240\u793a\uff1a"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://pic.leetcode-cn.com/1655808231-VTJvAM-2.svg",alt:"2.svg"})}),"\n",(0,l.jsxs)(e.p,{children:["\u8fd9\u91cc\u9700\u8981\u89e3\u91ca\u4e00\u4e0b\uff0c\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u6ca1\u6709\u5de6\u53f3\u5b69\u5b50\uff0c\u4f1a\u4e00\u4e0b\u5b50\u628a\u5de6\u53f3\u5b69\u5b50\u8282\u70b9\u90fd\u7ed9\u521b\u5efa\u51fa\u6765\uff0c\u5982\u4e0a\u56fe\u6a59\u8272\u8282\u70b9\u6240\u793a\uff0c\u5177\u4f53\u4ee3\u7801\u53ef\u89c1\u65b9\u6cd5 ",(0,l.jsx)(e.code,{children:"push_down()"})]}),"\n",(0,l.jsx)(e.p,{children:"\u4e24\u4e2a\u6a59\u8272\u7684\u53f6\u5b50\u8282\u70b9\u4ec5\u4ec5\u53ea\u662f\u88ab\u521b\u5efa\u51fa\u6765\u4e86\uff0c\u5e76\u65e0\u5b9e\u9645\u7684\u503c\uff0c\u5747\u4e3a 0\uff1b\u800c\u53e6\u5916\u4e00\u4e2a\u6a59\u8272\u7684\u975e\u53f6\u5b50\u8282\u70b9\uff0c\u503c\u4e3a 3 \u7684\u539f\u56e0\u662f\u4e0b\u9762\u7684\u5b69\u5b50\u8282\u70b9\u7684\u503c\u5411\u4e0a\u66f4\u65b0\u5f97\u5230\u7684"}),"\n",(0,l.jsx)(e.p,{children:"\u4e0b\u9762\u7ed9\u51fa\u4f9d\u6b21\u6dfb\u52a0\u5269\u4f59\u8282\u70b9\u7684\u8fc7\u7a0b\uff1a(\u6ce8\u610f\u89c2\u5bdf\u503c\u7684\u53d8\u5316\uff01\uff01)"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://pic.leetcode-cn.com/1655808224-kMYiyq-3.svg",alt:"3.svg"})}),"\n",(0,l.jsxs)(e.p,{children:["\u300c\u52a8\u6001\u5f00\u70b9\u300d\u4e00\u822c\u662f\u5728\u300c\u66f4\u65b0\u300d\u6216\u300c\u67e5\u8be2\u300d\u7684\u65f6\u5019\u52a8\u6001\u7684\u5efa\u7acb\u8282\u70b9\uff0c\u5177\u4f53\u53ef\u89c1\u4e0b\u9762\u7684",(0,l.jsx)(e.strong,{children:"\u66f4\u65b0"}),"\u548c",(0,l.jsx)(e.strong,{children:"\u67e5\u8be2"}),"\u64cd\u4f5c"]}),"\n",(0,l.jsx)(e.h2,{id:"\u7ebf\u6bb5\u6811\u7684\u66f4\u65b0",children:"\u7ebf\u6bb5\u6811\u7684\u66f4\u65b0"}),"\n",(0,l.jsxs)(e.p,{children:["\u6211\u770b\u5927\u591a\u6570\u6559\u7a0b\u90fd\u662f\u628a\u66f4\u65b0\u5206\u4e3a\u4e24\u79cd\uff1a\u300c\u70b9\u66f4\u65b0\u300d\u548c\u300c\u533a\u95f4\u66f4\u65b0\u300d\u3002\u5176\u5b9e\u8fd9\u4e24\u79cd\u53ef\u4ee5\u5408\u5e76\u6210\u4e00\u79cd\uff0c\u300c\u70b9\u66f4\u65b0\u300d\u4e0d\u5c31\u662f\u66f4\u65b0\u957f\u5ea6\u4e3a 1 \u7684\u533a\u95f4\u561b\uff01\uff01",(0,l.jsx)(e.br,{}),"\n\u66f4\u65b0\u533a\u95f4\u7684\u524d\u63d0\u662f\u627e\u5230\u9700\u8981\u66f4\u65b0\u7684\u533a\u95f4\uff0c\u6240\u4ee5\u548c\u67e5\u8be2\u7684\u601d\u8def\u5f88\u76f8\u4f3c",(0,l.jsx)(e.br,{}),"\n\u5982\u679c\u6211\u4eec\u8981\u628a\u533a\u95f4 [2, 4] \u5185\u7684\u5143\u7d20\u90fd\u300c\u27951\u300d"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://pic.leetcode-cn.com/1654588378-Bhkpkc-3.svg",alt:"3.svg"})}),"\n",(0,l.jsxs)(e.p,{children:["\u6211\u4eec\u4f1a\u53d1\u73b0\u4e00\u4e2a\u5f88\u6709\u610f\u601d\u7684\u73b0\u8c61\uff0c\u6211\u4eec\u53ea\u628a [2,2] \u548c [3,4] \u8fd9\u4e24\u4e2a\u533a\u95f4\u5bf9\u5e94\u7684\u8282\u70b9\u66f4\u65b0\u4e86\uff0c\u800c\u533a\u95f4 [3, 3] \u548c [4,4] \u5e76\u6ca1\u6709\u66f4\u65b0",(0,l.jsx)(e.br,{}),"\n\u6309\u9053\u7406\u6765\u8bf4\uff0c[3, 3] \u548c [4,4] \u4e5f\u662f\u9700\u8981\u66f4\u65b0\u7684\uff0c\u4e0d\u7136\u5f53\u6211\u4eec\u67e5\u8be2\u533a\u95f4 [3, 3] \u548c [4,4] \u7684\u503c\uff0c\u5c31\u4f1a\u51fa\u73b0\u9519\u8bef\uff01\uff01",(0,l.jsx)(e.br,{}),"\n\u8fd9\u662f\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528\u4e86\u300c\u61d2\u60f0\u6807\u8bb0\u300d\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u53ea\u9700\u8981\u66f4\u65b0\u5230\u6ee1\u8db3\u6761\u4ef6\u7684\u533a\u95f4\u5373\u53ef\uff0c\u7136\u540e\u518d\u7ed9\u8be5\u533a\u95f4\u5bf9\u5e94\u7684\u8282\u70b9\u52a0\u4e00\u4e2a\u61d2\u60f0\u6807\u8bb0\uff0c\u8868\u793a\u8be5\u8282\u70b9\u6240\u6709\u5bf9\u5e94\u7684\u5b69\u5b50\u8282\u70b9\u90fd\u5e94\u8be5\u6709\u6b64\u66f4\u65b0",(0,l.jsx)(e.br,{}),"\n\u5f53\u6211\u4eec\u5411\u5b69\u5b50\u8282\u70b9\u904d\u5386\u7684\u65f6\u5019\u4f1a\u628a\u300c\u61d2\u60f0\u6807\u8bb0\u300d\u4e0b\u63a8\u7ed9\u5b69\u5b50\u8282\u70b9",(0,l.jsx)(e.br,{}),"\n\u6211\u4eec\u9700\u8981\u7a0d\u5fae\u4fee\u6539\u4e00\u4e0b ",(0,l.jsx)(e.code,{children:"SegmentNode"})," \u7684\u6570\u636e\u7ed3\u6784"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:"class SegmentNode:\n\tdef __init__(self):\n\t\tself.left = None # SegmentNode\n\t\tself.right = None # SegmentNode\n\t\tself.val = 0 # \u8868\u793a\u5f53\u524d\u8282\u70b9\u503c\n\t\tself.add = 0 # \u61d2\u60f0\u6807\u8bb0\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u57fa\u4e8e\u300c\u52a8\u6001\u5f00\u70b9\u300d\u7684\u524d\u63d0\uff0c\u6211\u4eec\u4e0b\u63a8\u61d2\u60f0\u6807\u8bb0\u7684\u65f6\u5019\uff0c\u5982\u679c\u8282\u70b9\u4e0d\u5b58\u5728\u5de6\u53f3\u5b69\u5b50\u8282\u70b9\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u521b\u5efa\u5de6\u53f3\u5b69\u5b50\u8282\u70b9"}),"\n",(0,l.jsx)(e.p,{children:"\u5148\u6765\u5b9e\u73b0\u4e0b\u63a8\u61d2\u60f0\u6807\u8bb0\u7684\u51fd\u6570\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:"# left_num \u548c right_num \u8868\u793a\u5de6\u53f3\u5b69\u5b50\u533a\u95f4\u7684\u53f6\u5b50\u8282\u70b9\u6570\u91cf\n# \u56e0\u4e3a\u5982\u679c\u662f\u300c\u52a0\u51cf\u300d\u66f4\u65b0\u64cd\u4f5c\u7684\u8bdd\uff0c\u9700\u8981\u7528\u61d2\u60f0\u6807\u8bb0\u7684\u503c\u2716\ufe0f\u53f6\u5b50\u8282\u70b9\u7684\u6570\u91cf\n\ndef push_down(node, left_num, right_num):\n\t# \u52a8\u6001\u5f00\u70b9\n\tif node.left is None:\n\t\tnode.left = new SegmentNode()\t\n\tif node.right is None:\n\t\tnode.right = new SegmentNode()\n\n\t# \u5982\u679cadd \u4e3a0\uff0c\u8868\u793a\u6ca1\u6709\u6807\u8bb0\n\tif node.add == 0: \n\t\treturn \n\tnode.left.val += node.add * left_num\n\tnode.right.val += node.add * right_num\n\t\n\t# \u628a\u6807\u8bb0\u4e0b\u63a8\u7ed9\u5b69\u5b50\u8282\u70b9\n\t# \u5bf9\u533a\u95f4\u8fdb\u884c\u300c\u52a0\u51cf\u300d\u7684\u66f4\u65b0\u64cd\u4f5c\uff0c\u4e0b\u63a8\u61d2\u60f0\u6807\u8bb0\u65f6\u9700\u8981\u7d2f\u52a0\u8d77\u6765\uff0c\u4e0d\u80fd\u76f4\u63a5\u8986\u76d6\n\tnode.left.add += node.add\n\tnode.right.add += node.add\n\t# \u53d6\u6d88\u5f53\u524d\u8282\u70b9\u6807\u8bb0\n\tnode.add = 0\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4e0b\u9762\u6765\u5b9e\u73b0\u66f4\u65b0\u7684\u51fd\u6570\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'"""\n\u53c2\u6570\u7406\u89e3\uff1a\n- node\uff1a\u8868\u793a\u8981\u66f4\u65b0\u7684\u6811\u7684root\u6240\u5728\u70b9\n- start\uff1a\u8868\u793a\u8981\u66f4\u65b0\u7684\u6811\u7684\u4e0b\u754c \uff08\u6700\u5de6\u8fb9\uff09\uff08\u80fd\u53d6\u5230\uff09\n- end\uff1a\u8868\u793a\u8981\u66f4\u65b0\u7684\u6811\u7684\u4e0a\u754c\uff08\u6700\u53f3\u8fb9\uff09\uff08\u80fd\u53d6\u5230\uff09\n- lb\uff1a\u8868\u793a\u8981\u66f4\u65b0\u7684\u533a\u95f4\u7684\u4e0b\u754c \uff08\u80fd\u53d6\u5230\uff09\n- ub\uff1a\u8868\u793a\u8981\u66f4\u65b0\u7684\u533a\u95f4\u7684\u4e0a\u754c \uff08\u80fd\u53d6\u5230\uff09\n- val\uff1a\u8868\u793a\u5bf9\u4e8e\u8981\u66f4\u65b0\u7684\u533a\u95f4\u4e2d\n"""\ndef update(node, start, end, lb, ub, val):\n\n\t# \u627e\u5230\u6ee1\u8db3\u8981\u6c42\u7684\u533a\u95f4\n\tif lb <= start and end <= ub:\n\t\t# \u533a\u95f4\u8282\u70b9\u52a0\u4e0a\u66f4\u65b0\u503c\n\t\t# \u6ce8\u610f\uff1a\u9700\u8981\u2716\ufe0f\u8be5\u5b50\u6811\u6240\u6709\u53f6\u5b50\u8282\u70b9\n\t\tnode.val += (end - start + 1) * val\n\t\t# \u6dfb\u52a0\u61d2\u60f0\u6807\u8bb0\n\t\t# \u5bf9\u533a\u95f4\u8fdb\u884c\u300c\u52a0\u51cf\u300d\u7684\u66f4\u65b0\u64cd\u4f5c\uff0c\u61d2\u60f0\u6807\u8bb0\u9700\u8981\u7d2f\u52a0\uff0c\u4e0d\u80fd\u76f4\u63a5\u8986\u76d6\n\t\tnode.add += val \n\t\treturn \n\n\tmid = (start + end) // 2\n\t# \u4e0b\u63a8\u6807\u8bb0\n\t# mid - start + 1\uff1a\u8868\u793a\u5de6\u5b69\u5b50\u533a\u95f4\u53f6\u5b50\u8282\u70b9\u6570\u91cf\n\t# end - mid\uff1a\u8868\u793a\u53f3\u5b69\u5b50\u533a\u95f4\u53f6\u5b50\u8282\u70b9\u6570\u91cf\n\tpush_down(node, mid - start + 1, end - mid)\n\t# [start, mid] \u548c [l, r] \u53ef\u80fd\u6709\u4ea4\u96c6\uff0c\u904d\u5386\u5de6\u5b69\u5b50\u533a\u95f4\n\tif lb <= mid:\n\t\tupdate(node.left, start, mid, lb, ub, val)\n\t# [mid + 1, end] \u548c [l, r] \u53ef\u80fd\u6709\u4ea4\u96c6\uff0c\u904d\u5386\u53f3\u5b69\u5b50\u533a\u95f4\n\tif ub > mid:\n\t\tupdate(node.right, mid + 1, end, lb, ub, val)\n\t# \u5411\u4e0a\u66f4\u65b0\n\tpush_up(node)\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u7ebf\u6bb5\u6811\u7684\u67e5\u8be2",children:"\u7ebf\u6bb5\u6811\u7684\u67e5\u8be2"}),"\n",(0,l.jsxs)(e.p,{children:["\u5982\u679c\u6211\u4eec\u8981\u67e5\u8be2\u533a\u95f4\xa0",(0,l.jsx)(e.code,{children:"[2, 4]"}),"\xa0\u7684\u7ed3\u679c\uff0c\u5982\u4e0b\u56fe\u7ea2\u8272\u6807\u8bb0\u6240\u793a\uff1a"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://pic.leetcode-cn.com/1654588328-LNnVpz-2.svg",alt:"2.svg"})}),"\n",(0,l.jsx)(e.p,{children:"\u4e0b\u9762\u7ed9\u51fa\u4ee3\u7801\u5b9e\u73b0\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:"# \u5728\u533a\u95f4 [start, end] \u4e2d\u67e5\u8be2\u533a\u95f4 [lb, ub] \u7684\u7ed3\u679c\uff0c\u5373 [lb, ub] \u4fdd\u6301\u4e0d\u53d8\n# \u5bf9\u4e8e\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u5e94\u8be5\u8fd9\u6837\u8c03\u7528\u8be5\u51fd\u6570\uff1aquery(root, 0, 4, 2, 4)\ndef query(node, start, end, lb, ub):\n\t# \u533a\u95f4 [l ,r] \u5b8c\u5168\u5305\u542b\u533a\u95f4 [start, end]\n\t# \u4f8b\u5982\uff1a[2, 4] = [2, 2] + [3, 4]\uff0c\n\t# \u5f53 [start, end] = [2, 2] \u6216\u8005 [start, end] = [3, 4]\uff0c\u76f4\u63a5\u8fd4\u56de\n\tif lb <= start and end <= ub:\n\t\treturn node.val\n\n\t# \u628a\u5f53\u524d\u533a\u95f4 [start, end] \u5747\u5206\u5f97\u5230\u5de6\u53f3\u5b69\u5b50\u7684\u533a\u95f4\u8303\u56f4\n\t# node \u5de6\u5b69\u5b50\u533a\u95f4 [start, mid]\n\t# node \u5de6\u5b69\u5b50\u533a\u95f4 [mid + 1, end]\n\tmid = (start + end) // 2\n\tres = 0\n\n\t# \u4e0b\u63a8\u6807\u8bb0\n\tpush_down(node, mid - start + 1, end - mid)\n\n\t# [start, mid] \u548c [lb, ub] \u53ef\u80fd\u6709\u4ea4\u96c6\uff0c\u904d\u5386\u5de6\u5b69\u5b50\u533a\u95f4\n\tif lb <= mid:\n\t\tres += query(node.left, start, mid, lb, ub)\n\t# [mid + 1, end] \u548c [lb, ub] \u53ef\u80fd\u6709\u4ea4\u96c6\uff0c\u904d\u5386\u53f3\u5b69\u5b50\u533a\u95f4\n\tif ub > mid:\n\t\tres += query(node.right, mid + 1, end, lb, ub)\n\n\t# res \u628a\u5de6\u53f3\u5b50\u6811\u7684\u7ed3\u679c\u90fd\u7d2f\u52a0\u8d77\u6765\u4e86\uff0c\u4e0e\u6811\u7684\u540e\u7eed\u904d\u5386\u540c\u7406\n\treturn res\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u4ee3\u7801\u6c47\u603b",children:"\u4ee3\u7801\u6c47\u603b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'\nclass SegmentNode:\n\tdef __init__(self):\n\t\tself.left = None # SegmentNode\n\t\tself.right = None # SegmentNode\n\t\tself.val = 0 # \u8868\u793a\u5f53\u524d\u8282\u70b9\u503c\n\t\tself.add = 0 # \u61d2\u60f0\u6807\u8bb0\n\n# left_num \u548c right_num \u8868\u793a\u5de6\u53f3\u5b69\u5b50\u533a\u95f4\u7684\u53f6\u5b50\u8282\u70b9\u6570\u91cf\n# \u56e0\u4e3a\u5982\u679c\u662f\u300c\u52a0\u51cf\u300d\u66f4\u65b0\u64cd\u4f5c\u7684\u8bdd\uff0c\u9700\u8981\u7528\u61d2\u60f0\u6807\u8bb0\u7684\u503c\u2716\ufe0f\u53f6\u5b50\u8282\u70b9\u7684\u6570\u91cf\n\ndef push_down(node, left_num, right_num):\n\t# \u52a8\u6001\u5f00\u70b9\n\tif node.left is None:\n\t\tnode.left = new SegmentNode()\t\n\tif node.right is None:\n\t\tnode.right = new SegmentNode()\n\n\t# \u5982\u679cadd \u4e3a0\uff0c\u8868\u793a\u6ca1\u6709\u6807\u8bb0\n\tif node.add == 0: \n\t\treturn \n\tnode.left.val += node.add * left_num\n\tnode.right.val += node.add * right_num\n\t\n\t# \u628a\u6807\u8bb0\u4e0b\u63a8\u7ed9\u5b69\u5b50\u8282\u70b9\n\t# \u5bf9\u533a\u95f4\u8fdb\u884c\u300c\u52a0\u51cf\u300d\u7684\u66f4\u65b0\u64cd\u4f5c\uff0c\u4e0b\u63a8\u61d2\u60f0\u6807\u8bb0\u65f6\u9700\u8981\u7d2f\u52a0\u8d77\u6765\uff0c\u4e0d\u80fd\u76f4\u63a5\u8986\u76d6\n\tnode.left.add += node.add\n\tnode.right.add += node.add\n\t# \u53d6\u6d88\u5f53\u524d\u8282\u70b9\u6807\u8bb0\n\tnode.add = 0\n\n"""\n\u53c2\u6570\u7406\u89e3\uff1a\n- node\uff1a\u8868\u793a\u8981\u66f4\u65b0\u7684\u6811\u7684root\u6240\u5728\u70b9\n- start\uff1a\u8868\u793a\u8981\u66f4\u65b0\u7684\u6811\u7684\u4e0b\u754c \uff08\u6700\u5de6\u8fb9\uff09\uff08\u80fd\u53d6\u5230\uff09\n- end\uff1a\u8868\u793a\u8981\u66f4\u65b0\u7684\u6811\u7684\u4e0a\u754c\uff08\u6700\u53f3\u8fb9\uff09\uff08\u80fd\u53d6\u5230\uff09\n- lb\uff1a\u8868\u793a\u8981\u66f4\u65b0\u7684\u533a\u95f4\u7684\u4e0b\u754c \uff08\u80fd\u53d6\u5230\uff09\n- ub\uff1a\u8868\u793a\u8981\u66f4\u65b0\u7684\u533a\u95f4\u7684\u4e0a\u754c \uff08\u80fd\u53d6\u5230\uff09\n- val\uff1a\u8868\u793a\u5bf9\u4e8e\u8981\u66f4\u65b0\u7684\u533a\u95f4\u4e2d\n"""\ndef update(node, start, end, lb, ub, val):\n\n\t# \u627e\u5230\u6ee1\u8db3\u8981\u6c42\u7684\u533a\u95f4\n\tif lb <= start and end <= ub:\n\t\t# \u533a\u95f4\u8282\u70b9\u52a0\u4e0a\u66f4\u65b0\u503c\n\t\t# \u6ce8\u610f\uff1a\u9700\u8981\u2716\ufe0f\u8be5\u5b50\u6811\u6240\u6709\u53f6\u5b50\u8282\u70b9\n\t\tnode.val += (end - start + 1) * val\n\t\t# \u6dfb\u52a0\u61d2\u60f0\u6807\u8bb0\n\t\t# \u5bf9\u533a\u95f4\u8fdb\u884c\u300c\u52a0\u51cf\u300d\u7684\u66f4\u65b0\u64cd\u4f5c\uff0c\u61d2\u60f0\u6807\u8bb0\u9700\u8981\u7d2f\u52a0\uff0c\u4e0d\u80fd\u76f4\u63a5\u8986\u76d6\n\t\tnode.add += val \n\t\treturn \n\n\tmid = (start + end) // 2\n\t# \u4e0b\u63a8\u6807\u8bb0\n\t# mid - start + 1\uff1a\u8868\u793a\u5de6\u5b69\u5b50\u533a\u95f4\u53f6\u5b50\u8282\u70b9\u6570\u91cf\n\t# end - mid\uff1a\u8868\u793a\u53f3\u5b69\u5b50\u533a\u95f4\u53f6\u5b50\u8282\u70b9\u6570\u91cf\n\tpush_down(node, mid - start + 1, end - mid)\n\t# [start, mid] \u548c [l, r] \u53ef\u80fd\u6709\u4ea4\u96c6\uff0c\u904d\u5386\u5de6\u5b69\u5b50\u533a\u95f4\n\tif lb <= mid:\n\t\tupdate(node.left, start, mid, lb, ub, val)\n\t# [mid + 1, end] \u548c [l, r] \u53ef\u80fd\u6709\u4ea4\u96c6\uff0c\u904d\u5386\u53f3\u5b69\u5b50\u533a\u95f4\n\tif ub > mid:\n\t\tupdate(node.right, mid + 1, end, lb, ub, val)\n\t# \u5411\u4e0a\u66f4\u65b0\n\tpush_up(node)\n\n# \u5728\u533a\u95f4 [start, end] \u4e2d\u67e5\u8be2\u533a\u95f4 [lb, ub] \u7684\u7ed3\u679c\uff0c\u5373 [lb, ub] \u4fdd\u6301\u4e0d\u53d8\n# \u5bf9\u4e8e\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u5e94\u8be5\u8fd9\u6837\u8c03\u7528\u8be5\u51fd\u6570\uff1aquery(root, 0, 4, 2, 4)\ndef query(node, start, end, lb, ub):\n\t# \u533a\u95f4 [l ,r] \u5b8c\u5168\u5305\u542b\u533a\u95f4 [start, end]\n\t# \u4f8b\u5982\uff1a[2, 4] = [2, 2] + [3, 4]\uff0c\n\t# \u5f53 [start, end] = [2, 2] \u6216\u8005 [start, end] = [3, 4]\uff0c\u76f4\u63a5\u8fd4\u56de\n\tif lb <= start and end <= ub:\n\t\treturn node.val\n\n\t# \u628a\u5f53\u524d\u533a\u95f4 [start, end] \u5747\u5206\u5f97\u5230\u5de6\u53f3\u5b69\u5b50\u7684\u533a\u95f4\u8303\u56f4\n\t# node \u5de6\u5b69\u5b50\u533a\u95f4 [start, mid]\n\t# node \u5de6\u5b69\u5b50\u533a\u95f4 [mid + 1, end]\n\tmid = (start + end) // 2\n\tres = 0\n\n\t# \u4e0b\u63a8\u6807\u8bb0\n\tpush_down(node, mid - start + 1, end - mid)\n\n\t# [start, mid] \u548c [lb, ub] \u53ef\u80fd\u6709\u4ea4\u96c6\uff0c\u904d\u5386\u5de6\u5b69\u5b50\u533a\u95f4\n\tif lb <= mid:\n\t\tres += query(node.left, start, mid, lb, ub)\n\t# [mid + 1, end] \u548c [lb, ub] \u53ef\u80fd\u6709\u4ea4\u96c6\uff0c\u904d\u5386\u53f3\u5b69\u5b50\u533a\u95f4\n\tif ub > mid:\n\t\tres += query(node.right, mid + 1, end, lb, ub)\n\n\t# res \u628a\u5de6\u53f3\u5b50\u6811\u7684\u7ed3\u679c\u90fd\u7d2f\u52a0\u8d77\u6765\u4e86\uff0c\u4e0e\u6811\u7684\u540e\u7eed\u904d\u5386\u540c\u7406\n\treturn res\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u4f8b\u9898-\u6309\u96be\u5ea6\u4ece\u7b80\u5355\u5230\u96be",children:"\u4f8b\u9898 \u6309\u96be\u5ea6\u4ece\u7b80\u5355\u5230\u96be"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"My Calendar III"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8fd9\u4e2a\u9898\u4e0d\u9700\u8981\u5b9e\u73b0query\u65b9\u6cd5"}),"\n",(0,l.jsx)(e.li,{children:"\u800c\u4e14\u4e0d\u9700\u8981val\uff0c\u56e0\u4e3a\u6bcf\u6b21\u5728update\u7684\u65f6\u5019val\u90fd\u662f1"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Range Module"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8fd9\u4e2a\u9898val\u53ea\u8981\u662ftrue / false \u5c31\u597d"}),"\n",(0,l.jsx)(e.li,{children:"add\u4e5f\u53ea\u8981\u662f none/true/false \u5c31\u597d"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Amount of New Area Painted Each Day"}),"\n"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(c,{...n})}):c(n)}}}]);