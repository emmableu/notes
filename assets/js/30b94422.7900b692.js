"use strict";(globalThis.webpackChunknotes=globalThis.webpackChunknotes||[]).push([[92157],{28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>r});var i=n(96540);const s={},d=i.createContext(s);function l(e){const t=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(d.Provider,{value:t},e.children)}},31835:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"Leetcode/BFS/847.847 - Shortest Path Visiting All Nodes - Hard","title":"847.847 - Shortest Path Visiting All Nodes - Hard","description":"Solution: BFS","source":"@site/docs/03. Leetcode/01.BFS/847.847 - Shortest Path Visiting All Nodes - Hard.md","sourceDirName":"03. Leetcode/01.BFS","slug":"/p/c51d32ba-235c-4759-9085-d3de34bfd4b6","permalink":"/notes/docs/p/c51d32ba-235c-4759-9085-d3de34bfd4b6","draft":false,"unlisted":false,"editUrl":"https://github.com/emmableu/notes/edit/main/docs/03. Leetcode/01.BFS/847.847 - Shortest Path Visiting All Nodes - Hard.md","tags":[],"version":"current","frontMatter":{"created_at":"2025-10-23","page_link":"/p/c51d32ba-235c-4759-9085-d3de34bfd4b6","slug":"/p/c51d32ba-235c-4759-9085-d3de34bfd4b6"},"sidebar":"tutorialSidebar","previous":{"title":"815.815 - Bus Routes - Hard","permalink":"/notes/docs/p/1ff445bd-2374-42e5-bbf6-53b5762cbea3"},"next":{"title":"02.Binary Search","permalink":"/notes/docs/category/02binary-search"}}');var s=n(74848),d=n(28453);const l={created_at:"2025-10-23",page_link:"/p/c51d32ba-235c-4759-9085-d3de34bfd4b6",slug:"/p/c51d32ba-235c-4759-9085-d3de34bfd4b6"},r=void 0,o={},a=[{value:"Solution: BFS",id:"solution-bfs",level:2},{value:"1. \u65c5\u884c\u5546\u95ee\u9898\u7684\u4e00\u822c\u5f62\u5f0f",id:"1-\u65c5\u884c\u5546\u95ee\u9898\u7684\u4e00\u822c\u5f62\u5f0f",level:3},{value:"2. \u4e3a\u4ec0\u4e48\u8981\u5229\u7528\u72b6\u6001\u538b\u7f29\uff0c\u4ee5\u53ca\u72b6\u6001\u538b\u7f29\u662f\u4ec0\u4e48\uff1f",id:"2-\u4e3a\u4ec0\u4e48\u8981\u5229\u7528\u72b6\u6001\u538b\u7f29\u4ee5\u53ca\u72b6\u6001\u538b\u7f29\u662f\u4ec0\u4e48",level:3},{value:"Code",id:"code",level:3}];function c(e){const t={br:"br",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/202208232255912.png",alt:""}),"\n",(0,s.jsx)(t.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/202208232255438.png",alt:""})]}),"\n",(0,s.jsx)(t.h2,{id:"solution-bfs",children:"Solution: BFS"}),"\n",(0,s.jsx)(t.h3,{id:"1-\u65c5\u884c\u5546\u95ee\u9898\u7684\u4e00\u822c\u5f62\u5f0f",children:"1. \u65c5\u884c\u5546\u95ee\u9898\u7684\u4e00\u822c\u5f62\u5f0f"}),"\n",(0,s.jsx)(t.p,{children:"\u65c5\u884c\u5546\u95ee\u9898\uff08TSP\uff09\uff1a\u7ed9\u5b9a\u4e00\u7cfb\u5217\u57ce\u5e02\u548c\u6bcf\u5bf9\u57ce\u5e02\u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u6c42\u89e3\u8bbf\u95ee\u6bcf\u4e00\u5ea7\u57ce\u5e02\u4e00\u6b21\u5e76\u56de\u5230\u8d77\u59cb\u57ce\u5e02\u7684\u6700\u77ed\u56de\u8def\u3002\u4ece\u56fe\u8bba\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u8be5\u95ee\u9898\u5b9e\u8d28\u662f\u5728\u4e00\u4e2a\u5e26\u6743\u5b8c\u5168\u65e0\u5411\u56fe\u4e2d\uff0c\u627e\u4e00\u4e2a\u6743\u503c\u6700\u5c0f\u7684\u54c8\u5bc6\u987f\u56de\u8def\u3002"}),"\n",(0,s.jsx)(t.p,{children:"\u672c\u9898\u662f\u4e00\u9053\u7c7b\u4f3c\u65c5\u884c\u5546\u95ee\u9898\uff0c\u533a\u522b\u5728\u4e8e\uff1a\u53ef\u4ee5\u91cd\u590d\u8bbf\u95ee\u67d0\u4e9b\u8282\u70b9\uff0c\u4e14\u5728\u904d\u5386\u5b8c\u6700\u540e\u4e00\u4e2a\u8282\u70b9\u540e\u4e0d\u7528\u56de\u5230\u51fa\u53d1\u70b9\u3002"}),"\n",(0,s.jsx)(t.h3,{id:"2-\u4e3a\u4ec0\u4e48\u8981\u5229\u7528\u72b6\u6001\u538b\u7f29\u4ee5\u53ca\u72b6\u6001\u538b\u7f29\u662f\u4ec0\u4e48",children:"2. \u4e3a\u4ec0\u4e48\u8981\u5229\u7528\u72b6\u6001\u538b\u7f29\uff0c\u4ee5\u53ca\u72b6\u6001\u538b\u7f29\u662f\u4ec0\u4e48\uff1f"}),"\n",(0,s.jsx)(t.p,{children:"\u72b6\u6001\u538b\u7f29\u4e5f\u5373\u7528\u4e00\u4e2a\u53d8\u91cf\u6765\u8868\u793a\u5f53\u524d\u72b6\u6001\uff0c\u6bd4\u8f83\u5e38\u7528\u7684\u65b9\u5f0f\u662f\u5229\u7528\u4e00\u4e2a n \u4f4d k \u8fdb\u5236\u6570 mask \u8868\u793a\u5f53\u524d n \u4e2a\u8282\u70b9\u7684\u6240\u5904\u7684 k \u4e2a\u4e0d\u540c\u72b6\u6001\u3002\u5bf9\u4e8e\u672c\u9898\u800c\u8a00\uff0c\u67d0\u4e2a\u8282\u70b9\u53ea\u9700\u8981\u8bb0\u5f55\u662f\u5426\u904d\u5386\u8fc7\uff0c\u6240\u4ee5\u5229\u7528\u4e8c\u8fdb\u5236\u5373\u53ef\uff0c\u7531\u4e8e\u672c\u9898\u6570\u636e\u8303\u56f4 n\u226412\uff0c\u6240\u4ee5\u4e0d\u4f1a\u8d85\u8fc7 int \u578b\u8303\u56f4\u3002"}),"\n",(0,s.jsx)(t.p,{children:"\u4e00\u822c\u800c\u8a00\uff0cmask \u4ece\u4f4e\u5230\u9ad8\u7b2c i \u4f4d\u4e3a 0 \u8868\u793a\u7b2c i \u4e2a\u8282\u70b9\u8fd8\u672a\u88ab\u8bbf\u95ee\u8fc7\uff0c\u4e3a 1 \u5219\u76f8\u53cd\u3002\u4f8b\u5982:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\u5047\u8bbe\u6709 3 \u4e2a\u70b9\uff0c\u70b9 1 \u904d\u5386\u8fc7\uff0c\u70b9 2,3 \u672a\u904d\u5386\uff0c\u5219 mask= ",(0,s.jsx)(t.code,{children:"0b001"})]}),"\n",(0,s.jsxs)(t.li,{children:["\u82e5\u70b9 3 \u904d\u5386\u8fc7\uff0c\u70b9 1,2 \u672a\u904d\u5386\uff0c\u5219 mask= ",(0,s.jsx)(t.code,{children:"0b100"})]}),"\n",(0,s.jsxs)(t.li,{children:["\u7279\u522b\u5730\uff0c\u4e09\u4e2a\u70b9\u5747\u672a\u904d\u5386\u65f6\uff0cmask=",(0,s.jsx)(t.code,{children:"0b000"})," = 0"]}),"\n",(0,s.jsxs)(t.li,{children:["\u5747\u904d\u5386\u8fc7\u65f6\uff0cmask=",(0,s.jsx)(t.code,{children:"0b111"})," = 2^k - 1"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"\u4e00\u4e9b\u72b6\u6001\u538b\u7f29\u7684\u57fa\u672c\u64cd\u4f5c\u5982\u4e0b\uff1a"}),"\n",(0,s.jsxs)(t.p,{children:["\uff081\uff09\u8bbf\u95ee\u7b2c i \u4e2a\u70b9\u7684\u72b6\u6001\uff1a",(0,s.jsx)(t.code,{children:"state_i =(1 << i) & state"}),"\n\uff082\uff09\u66f4\u6539\u7b2c i \u4e2a\u70b9\u72b6\u6001\u4e3a 1\uff1a",(0,s.jsx)(t.code,{children:"state |= 1 << i"})]}),"\n",(0,s.jsxs)(t.p,{children:["Intelligent bfs should be such which will able to detect if including current node will result into cycle or not.",(0,s.jsx)(t.br,{}),"\nTake an example,"]}),"\n",(0,s.jsxs)(t.p,{children:["Take individual bfs starting from 0",(0,s.jsx)(t.br,{}),"\n{0}->",(0,s.jsx)(t.strong,{children:"{0,1}"}),"->{0,1,0}->Now we should not got to {0,1,0,1}."]}),"\n",(0,s.jsx)(t.p,{children:"If you see we already visited set of nodes {0,1} while we are at 0. (bold above). So we must not include 1 again as resulting visited list will become {0,1} again."}),"\n",(0,s.jsxs)(t.p,{children:["Take another example,",(0,s.jsx)(t.br,{}),"\nStarting from 1,"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["{1}->",(0,s.jsx)(t.strong,{children:"{1,0}"}),"->{1,0,1} = (We should visited this as by visiting 1 again (currently current node is 1) this could lead to some other path which would have connected to 1 only)"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["{1}->",(0,s.jsx)(t.strong,{children:"{1,0}"}),"->{1,0,1} -> {1,0,1,0} = (This shouldn't be visited) as by including 0 again, this is just repetition of 0 and 1 again in other words, by including 0 again resulting visited set will become {0,1} which we already visited(bold above)"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"\u5982\u679c\u5f53\u524d\u8d70\u5230\u70b9i\uff0c\u53d1\u73b0\u4e4b\u524d\u66fe\u7ecf\u6709\u4e00\u6b21\u4e5f\u8d70\u5230\u70b9 i\uff0c\u4e14\u4e4b\u524d\u8d70\u5230\u70b9i\u7684\u65f6\u5019\u5bf9\u5e94\u7684\u72b6\u6001\u548c\u73b0\u5728\u662f\u4e00\u6837\u7684\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u8df3\u8fc7\u8fd9\u4e2a\u70b9\u3002"}),"\n",(0,s.jsx)(t.h3,{id:"code",children:"Code"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"class Solution:\n\tdef shortestPathLength(self, graph: List[List[int]]) -> int:\n\t\tif len(graph) == 1:\n\t\t\treturn 0\n\t\tq = deque([(i, 1 << i) for i in range(len(graph))])\n\t\tvis = set(q) # (point, state)\n\t\tstep = 0\n\t\twhile q:\n\t\t\tstep += 1\n\t\t\tsize = len(q)\n\t\t\tfor _ in range(size):\n\t\t\t\tele, state = q.popleft()\n\t\t\t\tfor child in graph[ele]:\n\t\t\t\t\tnew_state = state | 1 << child\n\t\t\t\t\tif new_state == 2 ** len(graph) - 1:\n\t\t\t\t\t\treturn step\n\t\t\t\t\tif (child, new_state) in vis:\n\t\t\t\t\t\tcontinue\n\t\t\t\t\tq.append((child, new_state))\n\t\t\t\t\tvis.add((child, new_state))\n"})})]})}function h(e={}){const{wrapper:t}={...(0,d.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);