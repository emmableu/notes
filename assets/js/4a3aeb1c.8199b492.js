"use strict";(globalThis.webpackChunknotes=globalThis.webpackChunknotes||[]).push([[31263],{28453:(s,e,n)=>{n.d(e,{R:()=>r,x:()=>m});var a=n(96540);const i={},l=a.createContext(i);function r(s){const e=a.useContext(l);return a.useMemo(function(){return"function"==typeof s?s(e):{...e,...s}},[e,s])}function m(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(i):s.components||i:r(s.components),a.createElement(l.Provider,{value:e},s.children)}},65735:(s,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>m,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>t});const a=JSON.parse('{"id":"DL Theory 100/Positional Encoding in Transformers what it is and why its needed","title":"Positional Encoding in Transformers what it is and why its needed","description":"\u5b9a\u4e49\uff08\u5b9a\uff09\uff1aPositional Encoding \u662f\u5728 Transformer \u4e2d\u8868\u793a\u8bcd\u5e8f\u4fe1\u606f\u7684\u673a\u5236\u3002","source":"@site/docs/02. DL Theory 100/009. Positional Encoding in Transformers what it is and why its needed.md","sourceDirName":"02. DL Theory 100","slug":"/p/3efdeccf-1871-4d5a-b2a8-5b4396b9f398","permalink":"/notes/docs/p/3efdeccf-1871-4d5a-b2a8-5b4396b9f398","draft":false,"unlisted":false,"editUrl":"https://github.com/emmableu/notes/edit/main/docs/02. DL Theory 100/009. Positional Encoding in Transformers what it is and why its needed.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"created_at":"2025-11-01","page_link":"/p/3efdeccf-1871-4d5a-b2a8-5b4396b9f398","slug":"/p/3efdeccf-1871-4d5a-b2a8-5b4396b9f398"},"sidebar":"tutorialSidebar","previous":{"title":"Parameter-Efficient Fine-Tuning PEFT methods LoRA adapters prefix tuning and their benefits","permalink":"/notes/docs/p/e6c038a9-e537-4748-b708-94c823ad4b56"},"next":{"title":"Retrieval-Augmented Generation RAG concept and how it integrates external knowledge","permalink":"/notes/docs/p/6e96c293-2145-4ec2-86cc-06752fb47295"}}');var i=n(74848),l=n(28453);const r={created_at:"2025-11-01",page_link:"/p/3efdeccf-1871-4d5a-b2a8-5b4396b9f398",slug:"/p/3efdeccf-1871-4d5a-b2a8-5b4396b9f398"},m=void 0,c={},t=[{value:"\ud83d\udcd8 \u8be6\u7ec6\u89e3\u91ca",id:"-\u8be6\u7ec6\u89e3\u91ca",level:2},{value:"1\ufe0f\u20e3 \u80cc\u666f",id:"1\ufe0f\u20e3-\u80cc\u666f",level:3},{value:"2\ufe0f\u20e3 \u5e38\u89c1\u5b9e\u73b0",id:"2\ufe0f\u20e3-\u5e38\u89c1\u5b9e\u73b0",level:3},{value:"3\ufe0f\u20e3 \u6548\u679c",id:"3\ufe0f\u20e3-\u6548\u679c",level:3}];function h(s){const e={annotation:"annotation",br:"br",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msub:"msub",msup:"msup",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,l.R)(),...s.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u5b9a\u4e49\uff08\u5b9a\uff09"}),"\uff1aPositional Encoding \u662f\u5728 Transformer \u4e2d\u8868\u793a\u8bcd\u5e8f\u4fe1\u606f\u7684\u673a\u5236\u3002",(0,i.jsx)(e.br,{}),"\n",(0,i.jsx)(e.strong,{children:"\u539f\u56e0\uff08\u56e0\uff09"}),"\uff1aTransformer \u4e0d\u50cf RNN \u6709\u65f6\u95f4\u987a\u5e8f\uff0c\u5b83\u4f9d\u8d56\u81ea\u6ce8\u610f\u529b\u673a\u5236\uff0c\u9700\u663e\u5f0f\u52a0\u5165\u4f4d\u7f6e\u4fe1\u606f\u3002",(0,i.jsx)(e.br,{}),"\n",(0,i.jsx)(e.strong,{children:"\u65b9\u6cd5\uff08\u6cd5\uff09"}),"\uff1a\u901a\u8fc7\u56fa\u5b9a\uff08sin/cos\uff09\u6216\u53ef\u5b66\u4e60\u5411\u91cf\uff0c\u4e3a\u6bcf\u4e2a token \u6ce8\u5165\u4f4d\u7f6e\u7279\u5f81\u3002",(0,i.jsx)(e.br,{}),"\n",(0,i.jsx)(e.strong,{children:"\u7ed3\u679c\uff08\u679c\uff09"}),"\uff1a\u6a21\u578b\u80fd\u611f\u77e5\u5e8f\u5217\u7ed3\u6784\uff0c\u7406\u89e3\u201c\u8c01\u5728\u524d\u8c01\u5728\u540e\u201d\u3002",(0,i.jsx)(e.br,{}),"\n",(0,i.jsx)(e.strong,{children:"\u4f18\u70b9\uff08\u4f18\uff09"}),"\uff1a\u4fdd\u7559\u987a\u5e8f\u5173\u7cfb\u7684\u540c\u65f6\u4ecd\u652f\u6301\u5168\u5e76\u884c\u8ba1\u7b97\u3002"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"-\u8be6\u7ec6\u89e3\u91ca",children:"\ud83d\udcd8 \u8be6\u7ec6\u89e3\u91ca"}),"\n",(0,i.jsx)(e.h3,{id:"1\ufe0f\u20e3-\u80cc\u666f",children:"1\ufe0f\u20e3 \u80cc\u666f"}),"\n",(0,i.jsxs)(e.p,{children:["Transformer \u7684\u81ea\u6ce8\u610f\u529b\u662f ",(0,i.jsx)(e.strong,{children:"\u65e0\u5e8f\u7684"})," \u2014\u2014 \u5b83\u4e00\u6b21\u6027\u770b\u5230\u6574\u53e5\u6240\u6709 token\u3002\u4e3a\u8ba9\u6a21\u578b\u7406\u89e3\u8bcd\u5e8f\uff08\u5982 \u201c\u72d7\u54ac\u4eba\u201d \u2260 \u201c\u4eba\u54ac\u72d7\u201d\uff09\uff0c\u5fc5\u987b\u52a0\u4e0a ",(0,i.jsx)(e.strong,{children:"\u4f4d\u7f6e\u7f16\u7801"}),"\u3002"]}),"\n",(0,i.jsx)(e.h3,{id:"2\ufe0f\u20e3-\u5e38\u89c1\u5b9e\u73b0",children:"2\ufe0f\u20e3 \u5e38\u89c1\u5b9e\u73b0"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u6b63\u5f26\u4f59\u5f26\u4f4d\u7f6e\u7f16\u7801"}),"\uff08Vaswani et al. 2017\uff09"]}),"\n",(0,i.jsx)(e.span,{className:"katex-display",children:(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{children:"P"}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{children:"E"}),(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mo,{stretchy:"false",children:"("}),(0,i.jsx)(e.mi,{children:"p"}),(0,i.jsx)(e.mi,{children:"o"}),(0,i.jsx)(e.mi,{children:"s"}),(0,i.jsx)(e.mo,{separator:"true",children:","}),(0,i.jsx)(e.mn,{children:"2"}),(0,i.jsx)(e.mi,{children:"i"}),(0,i.jsx)(e.mo,{stretchy:"false",children:")"})]})]}),(0,i.jsx)(e.mo,{children:"="}),(0,i.jsx)(e.mi,{children:"sin"}),(0,i.jsx)(e.mo,{children:"\u2061"}),(0,i.jsx)(e.mo,{stretchy:"false",children:"("}),(0,i.jsx)(e.mi,{children:"p"}),(0,i.jsx)(e.mi,{children:"o"}),(0,i.jsx)(e.mi,{children:"s"}),(0,i.jsx)(e.mi,{mathvariant:"normal",children:"/"}),(0,i.jsxs)(e.msup,{children:[(0,i.jsx)(e.mn,{children:"10000"}),(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mn,{children:"2"}),(0,i.jsx)(e.mi,{children:"i"}),(0,i.jsx)(e.mi,{mathvariant:"normal",children:"/"}),(0,i.jsx)(e.mi,{children:"d"})]})]}),(0,i.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"PE_{(pos, 2i)} = \\sin(pos / 10000^{2i/d})"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1.0385em",verticalAlign:"-0.3552em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"E"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3448em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.5198em",marginLeft:"-0.0576em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsxs)(e.span,{className:"mord mtight",children:[(0,i.jsx)(e.span,{className:"mopen mtight",children:"("}),(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"p"}),(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"os"}),(0,i.jsx)(e.span,{className:"mpunct mtight",children:","}),(0,i.jsx)(e.span,{className:"mord mtight",children:"2"}),(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"}),(0,i.jsx)(e.span,{className:"mclose mtight",children:")"})]})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3552em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,i.jsx)(e.span,{className:"mrel",children:"="}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1.188em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mop",children:"sin"}),(0,i.jsx)(e.span,{className:"mopen",children:"("}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"p"}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"os"}),(0,i.jsx)(e.span,{className:"mord",children:"/1000"}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord",children:"0"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsx)(e.span,{className:"vlist-t",children:(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.938em"},children:(0,i.jsxs)(e.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsxs)(e.span,{className:"mord mtight",children:[(0,i.jsx)(e.span,{className:"mord mtight",children:"2"}),(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"}),(0,i.jsx)(e.span,{className:"mord mtight",children:"/"}),(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})]})})]})})})})})]}),(0,i.jsx)(e.span,{className:"mclose",children:")"})]})]})]})}),"\n",(0,i.jsx)(e.span,{className:"katex-display",children:(0,i.jsxs)(e.span,{className:"katex",children:[(0,i.jsx)(e.span,{className:"katex-mathml",children:(0,i.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,i.jsxs)(e.semantics,{children:[(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mi,{children:"P"}),(0,i.jsxs)(e.msub,{children:[(0,i.jsx)(e.mi,{children:"E"}),(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mo,{stretchy:"false",children:"("}),(0,i.jsx)(e.mi,{children:"p"}),(0,i.jsx)(e.mi,{children:"o"}),(0,i.jsx)(e.mi,{children:"s"}),(0,i.jsx)(e.mo,{separator:"true",children:","}),(0,i.jsx)(e.mn,{children:"2"}),(0,i.jsx)(e.mi,{children:"i"}),(0,i.jsx)(e.mo,{children:"+"}),(0,i.jsx)(e.mn,{children:"1"}),(0,i.jsx)(e.mo,{stretchy:"false",children:")"})]})]}),(0,i.jsx)(e.mo,{children:"="}),(0,i.jsx)(e.mi,{children:"cos"}),(0,i.jsx)(e.mo,{children:"\u2061"}),(0,i.jsx)(e.mo,{stretchy:"false",children:"("}),(0,i.jsx)(e.mi,{children:"p"}),(0,i.jsx)(e.mi,{children:"o"}),(0,i.jsx)(e.mi,{children:"s"}),(0,i.jsx)(e.mi,{mathvariant:"normal",children:"/"}),(0,i.jsxs)(e.msup,{children:[(0,i.jsx)(e.mn,{children:"10000"}),(0,i.jsxs)(e.mrow,{children:[(0,i.jsx)(e.mn,{children:"2"}),(0,i.jsx)(e.mi,{children:"i"}),(0,i.jsx)(e.mi,{mathvariant:"normal",children:"/"}),(0,i.jsx)(e.mi,{children:"d"})]})]}),(0,i.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(e.annotation,{encoding:"application/x-tex",children:"PE_{(pos, 2i+1)} = \\cos(pos / 10000^{2i/d})"})]})})}),(0,i.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1.0385em",verticalAlign:"-0.3552em"}}),(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"E"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(e.span,{className:"vlist-r",children:[(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3448em"},children:(0,i.jsxs)(e.span,{style:{top:"-2.5198em",marginLeft:"-0.0576em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsxs)(e.span,{className:"mord mtight",children:[(0,i.jsx)(e.span,{className:"mopen mtight",children:"("}),(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"p"}),(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"os"}),(0,i.jsx)(e.span,{className:"mpunct mtight",children:","}),(0,i.jsx)(e.span,{className:"mord mtight",children:"2"}),(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"}),(0,i.jsx)(e.span,{className:"mbin mtight",children:"+"}),(0,i.jsx)(e.span,{className:"mord mtight",children:"1"}),(0,i.jsx)(e.span,{className:"mclose mtight",children:")"})]})})]})}),(0,i.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.3552em"},children:(0,i.jsx)(e.span,{})})})]})})]}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,i.jsx)(e.span,{className:"mrel",children:"="}),(0,i.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,i.jsxs)(e.span,{className:"base",children:[(0,i.jsx)(e.span,{className:"strut",style:{height:"1.188em",verticalAlign:"-0.25em"}}),(0,i.jsx)(e.span,{className:"mop",children:"cos"}),(0,i.jsx)(e.span,{className:"mopen",children:"("}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"p"}),(0,i.jsx)(e.span,{className:"mord mathnormal",children:"os"}),(0,i.jsx)(e.span,{className:"mord",children:"/1000"}),(0,i.jsxs)(e.span,{className:"mord",children:[(0,i.jsx)(e.span,{className:"mord",children:"0"}),(0,i.jsx)(e.span,{className:"msupsub",children:(0,i.jsx)(e.span,{className:"vlist-t",children:(0,i.jsx)(e.span,{className:"vlist-r",children:(0,i.jsx)(e.span,{className:"vlist",style:{height:"0.938em"},children:(0,i.jsxs)(e.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,i.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsxs)(e.span,{className:"mord mtight",children:[(0,i.jsx)(e.span,{className:"mord mtight",children:"2"}),(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"}),(0,i.jsx)(e.span,{className:"mord mtight",children:"/"}),(0,i.jsx)(e.span,{className:"mord mathnormal mtight",children:"d"})]})})]})})})})})]}),(0,i.jsx)(e.span,{className:"mclose",children:")"})]})]})]})}),"\n",(0,i.jsx)(e.p,{children:"\u56fa\u5b9a\u51fd\u6570\uff0c\u80fd\u63a8\u5e7f\u5230\u4efb\u610f\u5e8f\u5217\u957f\u5ea6\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Learnable Positional Embedding"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6bcf\u4e2a\u4f4d\u7f6e\u6709\u53ef\u8bad\u7ec3\u5411\u91cf\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u5e38\u7528\u4e8e GPT\u3001BERT\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"3\ufe0f\u20e3-\u6548\u679c",children:"3\ufe0f\u20e3 \u6548\u679c"}),"\n",(0,i.jsx)(e.p,{children:"\u5728 embedding \u5c42\u52a0\u4e0a\u4f4d\u7f6e\u7f16\u7801\u540e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"x = token_embedding + positional_encoding\n"})})]})}function d(s={}){const{wrapper:e}={...(0,l.R)(),...s.components};return e?(0,i.jsx)(e,{...s,children:(0,i.jsx)(h,{...s})}):h(s)}}}]);