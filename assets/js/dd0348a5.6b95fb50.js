"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[766],{28453:(t,n,e)=>{e.d(n,{R:()=>i,x:()=>c});var s=e(96540);const a={},o=s.createContext(a);function i(t){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof t?t(n):{...n,...t}},[n,t])}function c(t){let n;return n=t.disableParentContext?"function"==typeof t.components?t.components(a):t.components||a:i(t.components),s.createElement(o.Provider,{value:n},t.children)}},45562:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"Leetcode/Stack/772.772 - Basic Calculator III - Hard","title":"772.772 - Basic Calculator III - Hard","description":"\u6ce8\u610f\uff1a","source":"@site/docs/Leetcode/16.Stack/772.772 - Basic Calculator III - Hard.md","sourceDirName":"Leetcode/16.Stack","slug":"/p/c6d1af36-8a48-45b2-8278-d900542a9bab","permalink":"/notes/docs/p/c6d1af36-8a48-45b2-8278-d900542a9bab","draft":false,"unlisted":false,"editUrl":"https://github.com/emmableu/notes/edit/main/docs/Leetcode/16.Stack/772.772 - Basic Calculator III - Hard.md","tags":[],"version":"current","frontMatter":{"created_at":"2025-10-23","page_link":"/p/c6d1af36-8a48-45b2-8278-d900542a9bab","slug":"/p/c6d1af36-8a48-45b2-8278-d900542a9bab"},"sidebar":"tutorialSidebar","previous":{"title":"739.739 - Daily Temperatures (Medium)","permalink":"/notes/docs/p/698f7255-a755-4cd2-8fa1-237d9263788f"},"next":{"title":"18.Union Find","permalink":"/notes/docs/category/18union-find"}}');var a=e(74848),o=e(28453);const i={created_at:"2025-10-23",page_link:"/p/c6d1af36-8a48-45b2-8278-d900542a9bab",slug:"/p/c6d1af36-8a48-45b2-8278-d900542a9bab"},c=void 0,r={},l=[{value:"\u6ce8\u610f\uff1a",id:"\u6ce8\u610f",level:2}];function p(t){const n={code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...t.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/202208241542067.png",alt:""})}),"\n",(0,a.jsx)(n.h2,{id:"\u6ce8\u610f",children:"\u6ce8\u610f\uff1a"}),"\n",(0,a.jsx)(n.p,{children:"python \u7684\u6574\u6570\u9664\u6cd5\u662f\u5411\u4e0b\u53d6\u6574\uff0c\u800c\u4e0d\u662f\u5411\u96f6\u53d6\u6574\u3002"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:'python2 \u7684\u9664\u6cd5 "/" \u662f\u6574\u6570\u9664\u6cd5\uff0c "-3 / 2 = -2"\xa0\uff1b'}),"\n",(0,a.jsx)(n.li,{children:'python3 \u7684\u5730\u677f\u9664 "//" \u662f\u6574\u6570\u9664\u6cd5\uff0c "-3 // 2 = -2" \uff1b'}),"\n",(0,a.jsx)(n.li,{children:'python3 \u7684\u9664\u6cd5 "/" \u662f\u6d6e\u70b9\u9664\u6cd5\uff0c "-3 / 2 = -1.5"\xa0\uff1b'}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u800c C++/Java \u4e2d\u7684\u6574\u6570\u9664\u6cd5\u662f\u5411\u96f6\u53d6\u6574\u3002"}),"\n",(0,a.jsx)(n.p,{children:'C++/Java \u4e2d "-3 / 2 = -1"\xa0. \u672c\u9898\u7684\u9898\u610f\uff08\u4e00\u822c\u60c5\u51b5\uff09\u90fd\u662f\u8981\u6c42\u5411\u96f6\u53d6\u6574\u7684\u3002'}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6cd5:"}),"\xa0\u5bf9 Python \u7684\u6574\u6570\u9664\u6cd5\u95ee\u9898\uff0c\u53ef\u4ee5\u7528 int(num1 / float(num2))\xa0\u6765\u505a\uff0c\u5373\u5148\u7528\u6d6e\u70b9\u6570\u9664\u6cd5\uff0c\u7136\u540e\u53d6\u6574\u3002"]}),"\n",(0,a.jsx)(n.p,{children:'\u65e0\u8bba\u5982\u4f55\uff0c\u6d6e\u70b9\u6570\u9664\u6cd5\u90fd\u4f1a\u5f97\u5230\u4e00\u4e2a\u6d6e\u70b9\u6570\uff0c\u6bd4\u5982 "-3 / 2.0 = 1.5"\xa0\uff1b \u6b64\u65f6\u518d\u53d6\u6574\uff0c\u5c31\u4f1a\u5f97\u5230\u6574\u6570\u90e8\u5206\uff0c\u5373 float(-1.5) = -1\xa0\u3002'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'class Solution:\n\tdef calculate(self, s: str) -> int:\n\t\ts = s.replace("(+", "(0+").replace("(-", "(0-")\n\t\top_priority = {"+": 0, "-": 0, "*": 1, "/": 1, "(": 2, ")": 2}\n\t\tnums, ops = [], []\n\t\ti = 0\n\t\twhile i < len(s):\n\t\t\tc = s[i]\n\t\t\tif c.isdigit():\n\t\t\t\twhile i + 1 < len(s) and s[i + 1].isdigit():\n\t\t\t\t\ti += 1\n\t\t\t\t\tc += s[i]\n\t\t\t\tnums.append(int(c))\n\t\t\telse:\n\t\t\t\tif c == ")":\n\t\t\t\t\twhile ops[-1] != "(":\n\t\t\t\t\t\tself.calc(nums, ops)\n\t\t\t\t\tops.pop()\n\t\t\t\telse:\n\t\t\t\t\tif ops and op_priority[c] <= op_priority[ops[-1]]:\n\t\t\t\t\t\twhile ops and ops[-1] != "(" \\\n\t\t\t\t\t\t\t\tand op_priority[c] <= op_priority[ops[-1]]:\n\t\t\t\t\t\t\tself.calc(nums, ops)\n\t\t\t\t\tops.append(c)\n\t\t\ti += 1\n\t\twhile ops:\n\t\t\tself.calc(nums, ops)\n\t\treturn nums[0]\n\n\tdef calc(self, nums, ops):\n\t\ty, x = nums.pop(), nums.pop()\n\t\top = ops.pop()\n\t\tif op == "+":\n\t\t\tres = x + y\n\t\telif op == "-":\n\t\t\tres = x - y\n\t\telif op == "*":\n\t\t\tres = x * y\n\t\telif op == "/":\n\t\t\tres = int(x / float(y))\n\t\tnums.append(res)\n'})})]})}function d(t={}){const{wrapper:n}={...(0,o.R)(),...t.components};return n?(0,a.jsx)(n,{...t,children:(0,a.jsx)(p,{...t})}):p(t)}}}]);