"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[9467],{28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>s});var d=t(96540);const a={},r=d.createContext(a);function i(e){const n=d.useContext(r);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),d.createElement(r.Provider,{value:n},e.children)}},88313:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>i,metadata:()=>d,toc:()=>o});const d=JSON.parse('{"id":"Leetcode/Other/158.158 - Read N Characters Given read4 II - Call Multiple Times - Hard","title":"158.158 - Read N Characters Given read4 II - Call Multiple Times - Hard","description":"LC link","source":"@site/docs/Leetcode/99.Other/158.158 - Read N Characters Given read4 II - Call Multiple Times - Hard.md","sourceDirName":"Leetcode/99.Other","slug":"/p/eff894da-0d84-4d25-a8d3-1ac8df54dcbd","permalink":"/notes/docs/p/eff894da-0d84-4d25-a8d3-1ac8df54dcbd","draft":false,"unlisted":false,"editUrl":"https://github.com/emmableu/notes/edit/main/docs/Leetcode/99.Other/158.158 - Read N Characters Given read4 II - Call Multiple Times - Hard.md","tags":[],"version":"current","frontMatter":{"created_at":"2025-10-23","page_link":"/p/eff894da-0d84-4d25-a8d3-1ac8df54dcbd","slug":"/p/eff894da-0d84-4d25-a8d3-1ac8df54dcbd"},"sidebar":"tutorialSidebar","previous":{"title":"1570.1570 - Dot Product of Two Sparse Vectors - Medium","permalink":"/notes/docs/p/b74a8257-73d2-4d30-b0dd-ae90093a1004"},"next":{"title":"16.16 - 3Sum Closest - Medium","permalink":"/notes/docs/p/76a39b67-bc64-4b53-9119-f08fca0d154b"}}');var a=t(74848),r=t(28453);const i={created_at:"2025-10-23",page_link:"/p/eff894da-0d84-4d25-a8d3-1ac8df54dcbd",slug:"/p/eff894da-0d84-4d25-a8d3-1ac8df54dcbd"},s=void 0,l={},o=[{value:"Solution",id:"solution",level:2},{value:"\u601d\u8def\uff1a",id:"\u601d\u8def",level:4},{value:"\u4ee3\u7801",id:"\u4ee3\u7801",level:4}];function c(e){const n={a:"a",br:"br",code:"code",h2:"h2",h4:"h4",img:"img",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"https://leetcode.com/problems/read-n-characters-given-read4-ii-call-multiple-times/",children:"LC link"}),"\n",(0,a.jsx)(n.a,{href:"https://leetcode.com/problems/read-n-characters-given-read4-ii-call-multiple-times/discuss/193873/Most-elegant-and-simple-solution-in-Python",children:"explanation"})]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/158-0.png",alt:""}),"\n",(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/emmableu/image/master/158-1.png",alt:""})]}),"\n",(0,a.jsx)(n.h2,{id:"solution",children:"Solution"}),"\n",(0,a.jsx)(n.h4,{id:"\u601d\u8def",children:"\u601d\u8def\uff1a"}),"\n",(0,a.jsxs)(n.p,{children:["\u672c\u9898\u4e3b\u8981\u662f\u8981\u601d\u8003\uff0c\u4ec0\u4e48\u6570\u636e\u7ed3\u6784\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u4ece read4, \u5f97\u5230\u53ef\u4ee5\u591a\u6b21\u4efb\u610f read \u4efb\u4f55\u957f\u5ea6\u7684\u4e1c\u897f\uff1f",(0,a.jsx)(n.br,{}),'\n\u5982\u679c\u6211\u4eec\u6bcf\u6b21\u90fd\u76f4\u63a5\u8c03\u7528read4\uff0c\u800c\u4e0d\u8bb0\u5f55\u4e0a\u4e00\u6b21\u8bfb\u5b8c\u591a\u51fa\u6765\u7684\u4e1c\u897f\uff0c\u90a3\u4e48\u6bd4\u5982 "abc", read(1), read(2), \u90a3\u4e48\u7b2c\u4e00\u6b21\u8bfb\u5b8c\uff0c\u56de\u6765\u4e00\u4e2aa\uff0c \u7b2c\u4e8c\u6b21\u518d\u8bfb\uff0c\u5c31\u6ca1\u6709\u4e86\u3002',(0,a.jsx)(n.br,{}),"\n\u6240\u4ee5\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u961f\u5217\u6765\u4fdd\u5b58\u6211\u4eec\u4e0a\u4e00\u6b21\u8bfb\u5b8c\u591a\u51fa\u6765\u7684\u4e1c\u897f\u3002"]}),"\n",(0,a.jsx)(n.h4,{id:"\u4ee3\u7801",children:"\u4ee3\u7801"}),"\n",(0,a.jsxs)(n.p,{children:["use ",(0,a.jsx)(n.code,{children:"idx"})," to indicate the next position to write. The next position to write is also the current length.",(0,a.jsx)(n.br,{}),"\ndry run\uff1a \u4ee5 \u4ee5\u4e0b call \u4e3a\u4f8b"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'file = "abc"\nsol = Solution()\nbuf = [""] * MAX_INT\nsol.read(buf, 2); sol.read(buf, 1); \n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'\u521a\u8fdb\u53bb\uff0c queue\u4e3a\u7a7a\uff0c\u6240\u4ee5\u76f4\u63a5\u8fdb\u7b2c\u4e8c\u4e2awhile\nl = 3, buf4 = ["a", "b", "c", ""],\n\u56e0\u4e3a l > n, self.queue = ["c"], \u7136\u540e "a", "b"\u5199\u8fdbbuf\uff0c buf = ["a", "b"]\n\n\u7136\u540e\uff0c queue = ["c"], buf = ["c"], \u76f4\u63a5 n = 0\uff0c \u51fa\u6765\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'class Solution:\n    def __init__(self):\n        self.queue = deque() # global "buffer"\n\n    def read(self, buf, n):\n        idx = 0\n\n        # \u601d\u8def\uff1a\u5148\u5047\u8bbe\u5df2\u7ecf\u6709\u4e00\u4e9b\u5728queue\u91cc\u9762\u4e86\n        # if queue is large enough, read from queue\n        while self.queue and n > 0:\n            buf[idx] = self.queue.popleft()\n            idx += 1\n            n -= 1\n\n        # \u601d\u8def\uff1a\u90a3\u600e\u4e48\u65e2\u4eceread4\u8bfb\u53d6\u4e1c\u897f\uff0c\u53c8\u628a\u591a\u4f59\u7684\u9001\u8fdbqueue\u5462\uff1f\n        while n > 0:\n            # read file to buf4\n            buf4 = [""]*4\n            l = read4(buf4)\n\n            # if no more char in file, return\n            if not l:\n                return idx\n\n            # if buf can not contain buf4, save to queue\n            if l > n:\n                self.queue += buf4[n:l]\n\n            # write buf4 into buf directly\n            for i in range(min(l, n)):\n                buf[idx] = buf4[i]\n                idx += 1\n                n -= 1\n        return idx\n'})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);