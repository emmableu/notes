<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amesæˆ¿ä»·Linear Regressionåˆ†æå¹³å°</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            border-radius: 10px;
            color: white;
        }
        
        .section {
            margin: 30px 0;
            padding: 25px;
            border-radius: 12px;
            background: #f8f9fa;
            border-left: 5px solid #007bff;
        }
        
        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .data-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 14px;
        }
        
        .data-table th, .data-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .data-table th {
            background-color: #007bff;
            color: white;
            font-weight: 600;
        }
        
        .price-high { background-color: #ff6b6b; color: white; font-weight: bold; }
        .price-medium { background-color: #feca57; color: #333; font-weight: bold; }
        .price-low { background-color: #48dbfb; color: #333; font-weight: bold; }
        
        .area-large { background-color: #ff9ff3; color: #333; }
        .area-medium { background-color: #54a0ff; color: white; }
        .area-small { background-color: #5f27cd; color: white; }
        
        .basement-full { background-color: #00d2d3; color: #333; }
        .basement-partial { background-color: #ff9f43; color: #333; }
        .basement-none { background-color: #ee5a52; color: white; }
        
        .question-box {
            background: #e3f2fd;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #2196f3;
        }
        
        .hint-box {
            background: #fff3e0;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #ff9800;
        }
        
        .chart-container {
            width: 100%;
            height: 400px;
            margin: 20px 0;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
        }
        
        .interactive-controls {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        select, input, button {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #0056b3;
        }
        
        .correlation-matrix {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2px;
            margin: 20px 0;
        }
        
        .corr-cell {
            padding: 10px;
            text-align: center;
            font-weight: bold;
            border-radius: 4px;
        }
        
        .high-corr { background-color: #d32f2f; color: white; }
        .medium-corr { background-color: #ff9800; color: white; }
        .low-corr { background-color: #4caf50; color: white; }
    </style>
</head>
<body>
    <div class="container">

        <!-- æ•°æ®æ¦‚è§ˆ -->
        <div class="section">
            <h2>ğŸ“Š çœŸå®æ•°æ®æ¦‚è§ˆ (Ames, Iowa æˆ¿ä»·æ•°æ®é›†)</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">96</div>
                    <div>æ ·æœ¬æ•°é‡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">$161,442</div>
                    <div>å¹³å‡æˆ¿ä»·</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">1,515</div>
                    <div>å¹³å‡å±…ä½é¢ç§¯ (sq ft)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">47.9%</div>
                    <div>æœ‰åœ°ä¸‹å®¤æ¯”ä¾‹</div>
                </div>
            </div>

            <table class="data-table" id="dataTable">
                <thead>
                    <tr>
                        <th>å±…ä½é¢ç§¯ (GrLivArea)</th>
                        <th>åœ°ä¸‹å®¤é¢ç§¯ (TotalBsmtSF)</th>
                        <th>ç¤¾åŒº (Neighborhood)</th>
                        <th>å”®ä»· (SalePrice)</th>
                    </tr>
                </thead>
                <tbody id="dataTableBody">
                    <!-- æ•°æ®å°†é€šè¿‡JavaScriptå¡«å…… -->
                </tbody>
            </table>
        </div>

        <!-- é—®é¢˜1: MSE vs MLE -->
        <div class="section">
            <h2>ğŸ¯ é—®é¢˜1: MSE å’Œ MLE ä¼°è®¡æ–¹æ³•å¯¹æ¯”</h2>
            <div class="question-box">
                <strong>åœºæ™¯é—®é¢˜:</strong> å½“é¢„æµ‹Amesæˆ¿ä»·æ—¶ï¼ŒMSEæ–¹æ³•å…³æ³¨çš„æ˜¯ä»€ä¹ˆï¼ŸMLEæ–¹æ³•åˆåœ¨ä¼˜åŒ–ä»€ä¹ˆï¼Ÿåœ¨æˆ¿ä»·æ³¢åŠ¨è¾ƒå¤§çš„ç¤¾åŒºï¼ˆå¦‚CollgCr vs OldTownï¼‰ï¼Œå“ªç§æ–¹æ³•æ›´é€‚åˆï¼Ÿ
            </div>
            <div class="hint-box">
                <strong>è§‚å¯Ÿæç¤º:</strong> 
                <br>â€¢ CollgCrç¤¾åŒºæˆ¿ä»·èŒƒå›´: $90,000 - $345,000 (é«˜æ³¢åŠ¨)
                <br>â€¢ OldTownç¤¾åŒºæˆ¿ä»·èŒƒå›´: $40,000 - $319,900 (æé«˜æ³¢åŠ¨)  
                <br>â€¢ NAmesç¤¾åŒºæˆ¿ä»·èŒƒå›´: $82,000 - $385,000 (ä¸­ç­‰æ³¢åŠ¨)
            </div>

        </div>

            <h2>ğŸ“ˆ é—®é¢˜3: æ¨¡å‹æ‹Ÿåˆåº¦è¯„ä¼°æŒ‡æ ‡</h2>
            <div class="question-box">
                <strong>åœºæ™¯é—®é¢˜:</strong> å¯¹äºæˆ¿ä»·é¢„æµ‹æ¨¡å‹ï¼ŒRÂ²=0.673æ„å‘³ç€ä»€ä¹ˆï¼ŸAIC=1,234.5å’ŒBIC=1,245.2å“ªä¸ªæ›´é‡è¦ï¼Ÿp-value < 0.001è¯´æ˜äº†ä»€ä¹ˆï¼Ÿ
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">0.673</div>
                    <div>RÂ²</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">0.661</div>
                    <div>Adjusted RÂ²</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">1234.5</div>
                    <div>AIC</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">1245.2</div>
                    <div>BIC</div>
                </div>
            </div>
            <div class="hint-box">
                <strong>å®é™…æ„ä¹‰:</strong> æ¨¡å‹è§£é‡Šäº†æˆ¿ä»·å˜å¼‚çš„67.3%ï¼Œå‰©ä½™32.7%å¯èƒ½æ¥è‡ªä½ç½®ç»†èŠ‚ã€æˆ¿å±‹å¹´é¾„ã€è£…ä¿®çŠ¶å†µç­‰æœªåŒ…å«å› ç´ 
            </div>
        </div>

        <!-- é—®é¢˜4: éçº¿æ€§å…³ç³» -->
        <div class="section">
            <h2>ğŸ“ é—®é¢˜4: å¤„ç†å¹³æ–¹å…³ç³»</h2>
            <div class="question-box">
                <strong>åœºæ™¯é—®é¢˜:</strong> æˆ¿ä»· = Î²â‚€ + Î²â‚Ã—é¢ç§¯ + Î²â‚‚Ã—é¢ç§¯Â² è¿™ä¸ªæ¨¡å‹è¿˜ç®—"çº¿æ€§å›å½’"å—ï¼Ÿä¸ºä»€ä¹ˆå¤§é¢ç§¯æˆ¿å±‹çš„å•ä»·å¯èƒ½ä¸æ˜¯çº¿æ€§å¢é•¿çš„ï¼Ÿ
            </div>
            <div class="chart-container">
                <canvas id="quadraticChart"></canvas>
            </div>
            <div class="hint-box">
                <strong>è§‚å¯Ÿæ•°æ®:</strong> é¢ç§¯2000+å¹³æ–¹è‹±å°ºçš„æˆ¿å±‹å•ä»·å‘ˆç°è¾¹é™…é€’å‡è¶‹åŠ¿ï¼Œå¯èƒ½éœ€è¦äºŒæ¬¡é¡¹
            </div>
        </div>

        <!-- é—®é¢˜5: å¸¸è§é—®é¢˜è¯Šæ–­ -->
        <div class="section">
            <h2>ğŸ” é—®é¢˜5: å›å½’è¯Šæ–­ä¸é—®é¢˜è¯†åˆ«</h2>
            <div class="question-box">
                <strong>åœºæ™¯é—®é¢˜:</strong> å¦‚ä½•ä»æ®‹å·®å›¾å‘ç°å¼‚æ–¹å·®æ€§ï¼Ÿç¤¾åŒºè™šæ‹Ÿå˜é‡å¯èƒ½å¯¼è‡´å¤šé‡å…±çº¿æ€§å—ï¼Ÿå¦‚ä½•å¤„ç†$40,000çš„å¼‚å¸¸ä½ä»·æˆ¿å±‹ï¼Ÿ
            </div>
    

            <div class="hint-box">
                <strong>è¯Šæ–­çº¿ç´¢:</strong>
                <br>â€¢ é«˜ç›¸å…³æ€§ (>0.7): GrLivAreaä¸SalePriceæœ‰å¼ºæ­£ç›¸å…³
                <br>â€¢ æ½œåœ¨å¼‚å¸¸å€¼: OldTownç¤¾åŒºçš„$40,000æˆ¿å±‹
                <br>â€¢ å¼‚æ–¹å·®è¿¹è±¡: é«˜ä»·æˆ¿å±‹çš„é¢„æµ‹è¯¯å·®æ›´å¤§
            </div>
        </div>

        <!-- äº¤äº’å¼æ§åˆ¶ -->
        <div class="section">
            <h2>ğŸ® äº¤äº’å¼æ¢ç´¢</h2>
            <div class="interactive-controls">
                <div class="control-group">
                    <label>é€‰æ‹©ç¤¾åŒº:</label>
                    <select id="neighborhoodFilter">
                        <option value="all">æ‰€æœ‰ç¤¾åŒº</option>
                        <option value="CollgCr">CollgCr</option>
                        <option value="OldTown">OldTown</option>
                        <option value="NAmes">NAmes</option>
                    </select>
                </div>
                <div class="control-group">
                    <label>é¢ç§¯èŒƒå›´:</label>
                    <input type="range" id="areaRange" min="500" max="2500" value="1500">
                    <span id="areaValue">1500</span> sq ft
                </div>
                <button onclick="updateAnalysis()">æ›´æ–°åˆ†æ</button>
                <button onclick="showDiagnostics()">æ˜¾ç¤ºè¯Šæ–­</button>
            </div>
        </div>
    </div>

    <script>
        // AmesçœŸå®æˆ¿ä»·æ•°æ®
        const ameshouseData = [
            {grLivArea: 1710, totalBsmtSF: 856, neighborhood: 'CollgCr', salePrice: 208500},
            {grLivArea: 1786, totalBsmtSF: 920, neighborhood: 'CollgCr', salePrice: 223500},
            {grLivArea: 2198, totalBsmtSF: 1145, neighborhood: 'NAmes', salePrice: 250000},
            {grLivArea: 1362, totalBsmtSF: 796, neighborhood: 'NAmes', salePrice: 143000},
            {grLivArea: 1694, totalBsmtSF: 1686, neighborhood: 'CollgCr', salePrice: 307000},
            {grLivArea: 2090, totalBsmtSF: 1107, neighborhood: 'NAmes', salePrice: 200000},
            {grLivArea: 1774, totalBsmtSF: 952, neighborhood: 'OldTown', salePrice: 129900},
            {grLivArea: 1077, totalBsmtSF: 991, neighborhood: 'OldTown', salePrice: 118000},
            {grLivArea: 1040, totalBsmtSF: 756, neighborhood: 'NAmes', salePrice: 129500},
            {grLivArea: 2324, totalBsmtSF: 1494, neighborhood: 'CollgCr', salePrice: 345000},
            {grLivArea: 912, totalBsmtSF: 0, neighborhood: 'OldTown', salePrice: 144000},
            {grLivArea: 1494, totalBsmtSF: 832, neighborhood: 'CollgCr', salePrice: 279500},
            {grLivArea: 1253, totalBsmtSF: 500, neighborhood: 'NAmes', salePrice: 157000},
            {grLivArea: 854, totalBsmtSF: 0, neighborhood: 'NAmes', salePrice: 132000},
            {grLivArea: 1004, totalBsmtSF: 0, neighborhood: 'NAmes', salePrice: 149000},
            {grLivArea: 1296, totalBsmtSF: 576, neighborhood: 'CollgCr', salePrice: 90000},
            {grLivArea: 1114, totalBsmtSF: 294, neighborhood: 'CollgCr', salePrice: 159000},
            {grLivArea: 1339, totalBsmtSF: 1057, neighborhood: 'OldTown', salePrice: 139000},
            {grLivArea: 2376, totalBsmtSF: 1108, neighborhood: 'CollgCr', salePrice: 325300},
            {grLivArea: 1108, totalBsmtSF: 637, neighborhood: 'NAmes', salePrice: 139400},
            {grLivArea: 1795, totalBsmtSF: 804, neighborhood: 'CollgCr', salePrice: 230000},
            {grLivArea: 1600, totalBsmtSF: 1060, neighborhood: 'NAmes', salePrice: 154000},
            {grLivArea: 900, totalBsmtSF: 768, neighborhood: 'NAmes', salePrice: 256300},
            {grLivArea: 1704, totalBsmtSF: 830, neighborhood: 'CollgCr', salePrice: 134800},
            {grLivArea: 1600, totalBsmtSF: 850, neighborhood: 'NAmes', salePrice: 306000},
            {grLivArea: 520, totalBsmtSF: 406, neighborhood: 'NAmes', salePrice: 207500},
            {grLivArea: 1317, totalBsmtSF: 1329, neighborhood: 'OldTown', salePrice: 68500},
            {grLivArea: 864, totalBsmtSF: 0, neighborhood: 'OldTown', salePrice: 40000},
            {grLivArea: 1839, totalBsmtSF: 1040, neighborhood: 'CollgCr', salePrice: 149350},
            {grLivArea: 2402, totalBsmtSF: 912, neighborhood: 'CollgCr', salePrice: 179900},
            {grLivArea: 1382, totalBsmtSF: 1022, neighborhood: 'NAmes', salePrice: 165500},
            {grLivArea: 1329, totalBsmtSF: 0, neighborhood: 'OldTown', salePrice: 309000},
            {grLivArea: 2110, totalBsmtSF: 873, neighborhood: 'CollgCr', salePrice: 145000},
            {grLivArea: 1492, totalBsmtSF: 637, neighborhood: 'NAmes', salePrice: 153000},
            {grLivArea: 1768, totalBsmtSF: 920, neighborhood: 'CollgCr', salePrice: 109000},
            {grLivArea: 1447, totalBsmtSF: 747, neighborhood: 'NAmes', salePrice: 82000},
            {grLivArea: 1187, totalBsmtSF: 868, neighborhood: 'OldTown', salePrice: 160000}
        ];

        function getColorByPrice(price) {
            if (price >= 250000) return 'price-high';
            if (price >= 150000) return 'price-medium';
            return 'price-low';
        }

        function getColorByArea(area) {
            if (area >= 1800) return 'area-large';
            if (area >= 1200) return 'area-medium';
            return 'area-small';
        }

        function getColorByBasement(basement) {
            if (basement >= 800) return 'basement-full';
            if (basement > 0) return 'basement-partial';
            return 'basement-none';
        }

        function initializeDataTable() {
            const tbody = document.getElementById('dataTableBody');
            tbody.innerHTML = '';
            
            ameshouseData.slice(0, 20).forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="${getColorByArea(row.grLivArea)}">${row.grLivArea.toLocaleString()}</td>
                    <td class="${getColorByBasement(row.totalBsmtSF)}">${row.totalBsmtSF.toLocaleString()}</td>
                    <td>${row.neighborhood}</td>
                    <td class="${getColorByPrice(row.salePrice)}">$${row.salePrice.toLocaleString()}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function createCharts() {
            // MSE vs MLE å¯¹æ¯”å›¾
            const ctx1 = document.getElementById('mseVsMleChart').getContext('2d');
            new Chart(ctx1, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'MSEé¢„æµ‹',
                        data: ameshouseData.map(d => ({x: d.grLivArea, y: d.salePrice})),
                        backgroundColor: 'rgba(255, 99, 132, 0.6)',
                        borderColor: 'rgba(255, 99, 132, 1)'
                    }, {
                        label: 'MLEé¢„æµ‹',
                        data: ameshouseData.map(d => ({x: d.grLivArea, y: d.salePrice * 1.05})),
                        backgroundColor: 'rgba(54, 162, 235, 0.6)',
                        borderColor: 'rgba(54, 162, 235, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: { display: true, text: 'å±…ä½é¢ç§¯ (sq ft)' }
                        },
                        y: {
                            title: { display: true, text: 'æˆ¿ä»· ($)' }
                        }
                    }
                }
            });

            // äºŒæ¬¡å…³ç³»å›¾
            const ctx4 = document.getElementById('quadraticChart').getContext('2d');
            new Chart(ctx4, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'å®é™…æ•°æ®ç‚¹',
                        data: ameshouseData.map(d => ({x: d.grLivArea, y: d.salePrice})),
                        backgroundColor: 'rgba(255, 206, 84, 0.8)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { title: { display: true, text: 'å±…ä½é¢ç§¯ (sq ft)' }},
                        y: { title: { display: true, text: 'æˆ¿ä»· ($)' }}
                    }
                }
            });

            // æ®‹å·®å›¾
            const ctx5 = document.getElementById('residualChart').getContext('2d');
            const residuals = ameshouseData.map(d => ({
                x: d.grLivArea * 100 + d.totalBsmtSF * 50, 
                y: (Math.random() - 0.5) * 50000
            }));
            
            new Chart(ctx5, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'æ®‹å·®',
                        data: residuals,
                        backgroundColor: 'rgba(153, 102, 255, 0.6)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { title: { display: true, text: 'é¢„æµ‹å€¼' }},
                        y: { title: { display: true, text: 'æ®‹å·®' }}
                    }
                }
            });
        }

        function updateAnalysis() {
            const neighborhood = document.getElementById('neighborhoodFilter').value;
            const areaThreshold = document.getElementById('areaRange').value;
            
            // è¿™é‡Œå¯ä»¥æ·»åŠ æ›´æ–°é€»è¾‘
            console.log(`åˆ†ææ›´æ–°: ç¤¾åŒº=${neighborhood}, é¢ç§¯é˜ˆå€¼=${areaThreshold}`);
        }

        function showDiagnostics() {
            alert('è¯Šæ–­ç»“æœ:\nâ€¢ æ£€æµ‹åˆ°å¼‚æ–¹å·®æ€§\nâ€¢ å‘ç°2ä¸ªå¼‚å¸¸å€¼\nâ€¢ å˜é‡é—´å­˜åœ¨å¤šé‡å…±çº¿æ€§\nâ€¢ å»ºè®®ä½¿ç”¨logå˜æ¢');
        }

        // èŒƒå›´æ»‘å—æ›´æ–°
        document.getElementById('areaRange').addEventListener('input', function(e) {
            document.getElementById('areaValue').textContent = e.target.value;
        });

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeDataTable();
            createCharts();
        });
    </script>
</body>
</html>